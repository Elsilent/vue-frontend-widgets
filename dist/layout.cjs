"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),B=require("./Icon-80a3c9ab.cjs"),$=require("./Logo-bd6e4e96.cjs"),y=require("./Toast-7de51521.cjs"),w=require("./_plugin-vue_export-helper-f246444f.cjs"),g=require("./Input-47bca9be.cjs"),M=require("./Form-d76f9656.cjs"),b=require("./Info-ad8c31fe.cjs"),N=require("./marker.cjs"),E=require("./BrandText-9e6e16c6.cjs"),L=require("./utils/error.cjs"),h=require("./match-5382edcf.cjs"),x=require("./undefined_theme-019f6866.cjs");require("./Popover-5322298f.cjs");const q=e.defineComponent({__name:"AccountMenu",props:{avatar:{},menuItems:{}},setup(d){const v=d,{avatar:t,menuItems:s}=e.toRefs(v),p=e.computed(()=>t&&t.value&&"icon"in t.value?t.value.icon:void 0),l=e.computed(()=>t&&t.value&&"iconBackend"in t.value?t.value.iconBackend:void 0),a=e.computed(()=>t&&t.value&&"label"in t.value?t.value.label:void 0),i=e.computed(()=>t&&t.value&&"source"in t.value?t.value.source:void 0),n=e.ref(),r=e.ref(!1),m=o=>{var u;o&&((u=n.value)!=null&&u.$el.contains(o.target))||(r.value=!1,window.removeEventListener("mousedown",m))},_=()=>{r.value=!0,window.addEventListener("mousedown",m)},c=o=>{s.value[o].handler(),m()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",m)}),(o,u)=>(e.openBlock(),e.createBlock(B.Align,{class:"account-menu",ref_key:"accountMenu",ref:n},{default:e.withCtx(()=>[e.createVNode($.Avatar,{onClick:u[0]||(u[0]=f=>_()),onFocus:u[1]||(u[1]=f=>_()),onKeydown:[u[2]||(u[2]=e.withKeys(e.withModifiers(f=>m(),["shift"]),["tab"])),u[3]||(u[3]=e.withKeys(f=>m(),["tab"]))],icon:p.value,iconBackend:l.value,label:a.value,source:i.value},null,8,["icon","iconBackend","label","source"]),e.createVNode(y.PopoverMenu,{class:"account-menu",onSelect:u[4]||(u[4]=f=>c(f)),items:e.unref(s),visible:r.value},null,8,["items","visible"])]),_:1},512))}});const z=w._export_sfc(q,[["__scopeId","data-v-6b125e88"]]),F=e.defineComponent({__name:"CurrencySelector",props:{currencies:{},modelValue:{}},emits:["update:modelValue"],setup(d,{emit:v}){const t=d,{currencies:s,modelValue:p}=e.toRefs(t),l=e.ref(),a=e.ref(!1),i=e.computed(()=>s.value.reduce((c,o)=>(c[o.code]={label:o.label},c),{})??{}),n=e.computed(()=>s.value.find(({code:c})=>p.value===c)),r=c=>{var o,u;c&&((o=l.value)!=null&&o.$el.contains(c.target))||((u=l.value)==null||u.$el.querySelector(".button").blur(),a.value=!1,window.removeEventListener("mousedown",r))},m=()=>{a.value=!0,window.addEventListener("mousedown",r)},_=c=>{v("update:modelValue",c),r()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",r)}),(c,o)=>(e.openBlock(),e.createBlock(B.Align,{class:"currency-selector",ref_key:"currencySelector",ref:l,horizontal:"center"},{default:e.withCtx(()=>{var u;return[e.createVNode(g.Button,{class:"currency-button",onClick:o[0]||(o[0]=f=>m()),onFocus:o[1]||(o[1]=f=>m()),onKeydown:[o[2]||(o[2]=e.withKeys(e.withModifiers(f=>r(),["shift"]),["tab"])),o[3]||(o[3]=e.withKeys(f=>r(),["tab"]))],label:(u=n.value)==null?void 0:u.symbol,mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["label"]),e.createVNode(y.PopoverMenu,{class:"currency-menu no-spacing",onSelect:o[4]||(o[4]=f=>_(f)),items:i.value,visible:a.value},null,8,["items","visible"])]}),_:1},512))}});const A=w._export_sfc(F,[["__scopeId","data-v-a650d612"]]),U=e.defineComponent({__name:"Form",props:{fields:{},values:{}},setup(d){const v=d,{fields:t}=e.toRefs(v);return(s,p)=>(e.openBlock(),e.createBlock(M.GenericForm,{fields:e.unref(t),values:s.values},{"field(dropdown)":e.withCtx(({code:l,label:a,options:i,value:n})=>[a?(e.openBlock(),e.createBlock(b.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(g.Dropdown,{"onUpdate:modelValue":r=>s.$emit(`update:${l}`,r),items:i.items,modelValue:n},null,8,["onUpdate:modelValue","items","modelValue"])]),"field(info)":e.withCtx(({label:l})=>[e.createVNode(b.Info,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l),1)]),_:2},1024)]),"field(input)":e.withCtx(({code:l,label:a,value:i})=>[a?(e.openBlock(),e.createBlock(b.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(g.Input,{"onUpdate:modelValue":n=>s.$emit(`update:${l}`,n),modelValue:i},null,8,["onUpdate:modelValue","modelValue"])]),_:1},8,["fields","values"]))}});const R=w._export_sfc(U,[["__scopeId","data-v-39d44946"]]),K=e.defineComponent({__name:"Header",setup(d){const v=()=>{document.documentElement.scrollTo({left:0,top:0})};return(t,s)=>(e.openBlock(),e.createBlock(B.Align,{class:"header",vertical:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",{class:"title",onClick:s[0]||(s[0]=()=>v())},[e.createVNode(b.Info,{size:"large-2"},{default:e.withCtx(()=>[e.renderSlot(t.$slots,"title",{},void 0,!0)]),_:3})]),e.createVNode(N.Separator),e.renderSlot(t.$slots,"end",{},void 0,!0)]),_:3}))}});const D=w._export_sfc(K,[["__scopeId","data-v-b7acc042"]]),H=e.defineComponent({__name:"LocaleSelector",props:{locales:{},modelValue:{}},emits:["update:modelValue"],setup(d,{emit:v}){const t=d,{locales:s,modelValue:p}=e.toRefs(t),l=e.ref(),a=e.ref(!1),i=e.computed(()=>s.value.reduce((c,o)=>(c[o.code]={icon:o.icon,iconBackend:"flag-icons"},c),{})),n=e.computed(()=>s.value.find(c=>c.code===p.value).icon),r=c=>{var o,u;c&&((o=l.value)!=null&&o.$el.contains(c.target))||(a.value=!1,(u=l.value)==null||u.$el.querySelector(".button").blur(),window.removeEventListener("mousedown",r))},m=()=>{a.value=!0,window.addEventListener("mousedown",r)},_=c=>{v("update:modelValue",c),r()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",r)}),(c,o)=>(e.openBlock(),e.createBlock(B.Align,{class:"locale-selector",ref_key:"localeSelector",ref:l,horizontal:"center"},{default:e.withCtx(()=>[e.createVNode(g.Button,{class:"locale-button",onClick:o[0]||(o[0]=u=>m()),onFocus:o[1]||(o[1]=u=>m()),onKeydown:[o[2]||(o[2]=e.withKeys(e.withModifiers(u=>r(),["shift"]),["tab"])),o[3]||(o[3]=e.withKeys(u=>r(),["tab"]))],icon:n.value,iconBackend:"flag-icons-square",mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["icon"]),e.createVNode(y.PopoverMenu,{class:"locale-menu no-spacing",onSelect:o[4]||(o[4]=u=>_(u)),items:i.value,visible:a.value},null,8,["items","visible"])]),_:1},512))}});const P=w._export_sfc(H,[["__scopeId","data-v-dd1fb6f5"]]);class S extends L.BaseError{getMessage(v){return`Invalid menu item level ${v}`}}const j=e.defineComponent({__name:"MenuItem",props:{active:{type:Boolean,default:!1},icon:{},iconBackend:{},label:{},level:{default:1},withSublevel:{type:Boolean,default:!1},link:{}},setup(d){const v=d,{active:t,icon:s,iconBackend:p,label:l,level:a,withSublevel:i}=e.toRefs(v),n=e.computed(()=>h.match(a.value).when(1,()=>"large-3").whenAny([2,3],()=>"large").or(c=>{throw new S(c)}).done),r=e.computed(()=>t.value?"elevated-2":"elevated"),m=e.computed(()=>h.match(a.value).when(1,()=>"large").whenAny([2,3],()=>"normal").or(c=>{throw new S(c)}).done),_=e.computed(()=>({active:t.value,[`level-${a.value}`]:!0,"with-sublevel":i.value}));return(c,o)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.link?"a":"div"),{class:e.normalizeClass(["menu-item",_.value]),href:c.link?c.link:void 0},{default:e.withCtx(()=>[e.unref(s)?(e.openBlock(),e.createBlock(B.Icon,{key:0,class:"item-icon",backend:e.unref(p),elevation:r.value,size:n.value,value:e.unref(s)},null,8,["backend","elevation","size","value"])):e.createCommentVNode("",!0),e.createVNode(b.Info,{elevation:r.value,size:m.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)),1)]),_:1},8,["elevation","size"]),e.unref(i)?(e.openBlock(),e.createBlock(B.Icon,{key:1,class:"chevron",elevation:r.value,size:"large-3",value:"chevron-right"},null,8,["elevation"])):e.createCommentVNode("",!0)]),_:1},8,["class","href"]))}});const C=w._export_sfc(j,[["__scopeId","data-v-78a874f4"]]),O=e.defineComponent({__name:"MenuSubsection",props:{icon:{},iconBackend:{},items:{},label:{},level:{default:0},prefix:{},router:{},translator:{}},setup(d){const v=d,{icon:t,iconBackend:s,items:p,label:l,level:a,prefix:i,router:n,translator:r}=e.toRefs(v),m=e.computed(()=>n.value.currentRoute.value.meta.menuItem),_=e.computed(()=>Object.entries(p.value).some(([u,f])=>"route"in f&&`${i.value}${u}`===m.value)),c=e.computed(()=>a.value+1),o=e.computed(()=>a.value+1);return(u,f)=>{const T=e.resolveComponent("MenuSubsection",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(l)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(a)===0?(e.openBlock(),e.createBlock(b.Info,{key:0,class:"section",elevation:"elevated"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(r)(e.unref(l)).toUpperCase()),1)]),_:1})):(e.openBlock(),e.createBlock(C,{key:1,active:_.value,icon:e.unref(t),iconBackend:e.unref(s),label:e.unref(l),level:e.unref(a),withSublevel:""},null,8,["active","icon","iconBackend","label","level"]))],64)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(p),(k,V)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,["items"in k?(e.openBlock(),e.createBlock(T,{key:0,icon:k.icon,iconBackend:k.iconBackend,items:k.items,level:o.value,label:k.label?e.unref(r)(k.label):"",prefix:`${e.unref(i)}${V}.`,router:e.unref(n),translator:e.unref(r)},null,8,["icon","iconBackend","items","level","label","prefix","router","translator"])):(e.openBlock(),e.createBlock(C,{key:1,onClick:e.withModifiers(()=>e.unref(n).push(k.route),["prevent"]),active:`${e.unref(i)}${V}`===m.value,icon:k.icon,iconBackend:k.iconBackend,label:e.unref(r)(k.label),level:c.value,link:e.unref(n).resolve({name:k.route.name}).href},null,8,["onClick","active","icon","iconBackend","label","level","link"]))],64))),256))],64)}}});const I=w._export_sfc(O,[["__scopeId","data-v-e2b93ab7"]]),G=d=>(e.pushScopeId("data-v-00bfa0a4"),d=d(),e.popScopeId(),d),J={class:"side-menu"},Q={class:"items"},W=G(()=>e.createElementVNode("div",{class:"pixel"}," ",-1)),X=e.defineComponent({__name:"SideMenu",props:{brandText:{},menu:{},router:{},translator:{type:Function}},setup(d){const v=d,{router:t}=e.toRefs(v);return(s,p)=>(e.openBlock(),e.createElementBlock("div",J,[e.createElementVNode("div",{class:"brand",onClick:p[0]||(p[0]=l=>e.unref(t).push({name:"default"}))},[e.createVNode($.Logo),e.createVNode(E.BrandText,{elevation:"elevated-3",size:"large-4"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s.brandText),1)]),_:1})]),e.createElementVNode("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.menu,(l,a)=>(e.openBlock(),e.createBlock(I,{icon:l.icon,iconBackend:l.iconBackend,items:l.items,label:l.label??"",prefix:`${a}.`,router:e.unref(t),translator:s.translator},null,8,["icon","iconBackend","items","label","prefix","router","translator"]))),256)),W])]))}});const Y=w._export_sfc(X,[["__scopeId","data-v-00bfa0a4"]]),Z=e.defineComponent({__name:"ThemeToggle",props:{modelValue:{}},emits:["update:modelValue"],setup(d,{emit:v}){const t=d,{modelValue:s}=e.toRefs(t),p=e.computed(()=>h.match(s.value).when("dark",()=>"moon").when("light",()=>"sun").or(i=>{throw new x.UndefinedThemeError(i)}).done),l=e.computed(()=>h.match(s.value).when("dark",()=>"accent").when("light",()=>"important").or(i=>{throw new x.UndefinedThemeError(i)}).done),a=()=>{const i=h.match(s.value).when("dark",()=>"light").when("light",()=>"dark").or(n=>{throw new x.UndefinedThemeError(n)}).done;v("update:modelValue",i)};return(i,n)=>(e.openBlock(),e.createBlock(B.Align,{class:"theme-toggle"},{default:e.withCtx(()=>[e.createVNode(g.Button,{onClick:n[0]||(n[0]=()=>a()),icon:p.value,mood:l.value,outline:"",size:"large-2",shape:"round"},null,8,["icon","mood"])]),_:1}))}});const ee=w._export_sfc(Z,[["__scopeId","data-v-8832a6ee"]]),oe={class:"toasts"},te=e.defineComponent({__name:"Toasts",props:{toasts:{}},emits:["removeToast"],setup(d,{emit:v}){const t=d,{toasts:s}=e.toRefs(t),p=e.computed(()=>Object.entries(s.value).reverse().map(([n,r])=>[Number(n),r])),l=e.ref([]),a=e.ref([]),i=n=>{l.value.includes(n)||(l.value.push(n),clearTimeout(a.value[n]),delete a.value[n],window.setTimeout(()=>{v("removeToast",n),l.value=l.value.filter(r=>r!==n)},500))};return e.watch(s,()=>{for(const n of s.value)n.id in a.value||(a.value[n.id]=window.setTimeout(()=>{i(n.id)},5e3))},{deep:!0,immediate:!0}),(n,r)=>(e.openBlock(),e.createElementBlock("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,([m,_])=>(e.openBlock(),e.createBlock(y.Toast,{onClick:()=>i(m),class:e.normalizeClass({"fade-out":l.value.includes(_.id)}),icon:_.icon,iconBackend:_.iconBackend,key:`toast-${_.id}`,mood:_.mood,message:_.message,title:_.title},null,8,["onClick","class","icon","iconBackend","mood","message","title"]))),128))]))}});const ne=w._export_sfc(te,[["__scopeId","data-v-3d45b4ea"]]);exports.AccountMenu=z;exports.CurrencySelector=A;exports.Form=R;exports.Header=D;exports.LocaleSelector=P;exports.SideMenu=Y;exports.SideMenuItem=C;exports.SideMenuSubsection=I;exports.ThemeToggle=ee;exports.Toasts=ne;
