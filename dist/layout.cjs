"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),h=require("./Icon-80a3c9ab.cjs"),E=require("./Logo-4cadd711.cjs"),C=require("./Toast-8778b526.cjs"),_=require("./_plugin-vue_export-helper-f246444f.cjs"),b=require("./Input-05b931ff.cjs"),L=require("./Form-d76f9656.cjs"),w=require("./Info-ad8c31fe.cjs"),W=require("./marker.cjs"),z=require("./BrandText-9e6e16c6.cjs"),F=require("./utils/error.cjs"),y=require("./match-5382edcf.cjs"),S=require("./undefined_theme-019f6866.cjs");require("./Popover-5322298f.cjs");const q=e.defineComponent({__name:"AccountMenu",props:{avatar:{},menuItems:{}},setup(u){const d=u,{avatar:n,menuItems:c}=e.toRefs(d),m=e.computed(()=>n&&n.value&&"icon"in n.value?n.value.icon:void 0),s=e.computed(()=>n&&n.value&&"iconBackend"in n.value?n.value.iconBackend:void 0),l=e.computed(()=>n&&n.value&&"label"in n.value?n.value.label:void 0),o=e.computed(()=>n&&n.value&&"source"in n.value?n.value.source:void 0),t=e.ref(),a=e.ref(!1),v=r=>{var f;r&&((f=t.value)!=null&&f.$el.contains(r.target))||(a.value=!1,window.removeEventListener("mousedown",v))},p=()=>{a.value=!0,window.addEventListener("mousedown",v)},i=r=>{c.value[r].handler(),v()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",v)}),(r,f)=>(e.openBlock(),e.createBlock(h.Align,{class:"account-menu",ref_key:"accountMenu",ref:t},{default:e.withCtx(()=>[e.createVNode(E.Avatar,{onClick:f[0]||(f[0]=()=>p()),icon:m.value,iconBackend:s.value,label:l.value,source:o.value},null,8,["icon","iconBackend","label","source"]),e.createVNode(C.PopoverMenu,{class:"account-menu",onSelect:f[1]||(f[1]=x=>i(x)),items:e.unref(c),visible:a.value},null,8,["items","visible"])]),_:1},512))}});const A=_._export_sfc(q,[["__scopeId","data-v-0acd5249"]]),P=e.defineComponent({__name:"CurrencySelector",props:{currencies:{},modelValue:{}},emits:["update:modelValue"],setup(u,{emit:d}){const n=u,{currencies:c,modelValue:m}=e.toRefs(n),s=e.ref(),l=e.ref(!1),o=e.computed(()=>c.value.reduce((i,r)=>(i[r.code]={label:r.label},i),{})??{}),t=e.computed(()=>c.value.find(({code:i})=>m.value===i)),a=i=>{var r;i&&((r=s.value)!=null&&r.$el.contains(i.target))||(console.log("hi"),l.value=!1,window.removeEventListener("mousedown",a))},v=()=>{l.value=!0,window.addEventListener("mousedown",a)},p=i=>{d("update:modelValue",i),a()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",a)}),(i,r)=>(e.openBlock(),e.createBlock(h.Align,{class:"currency-selector",ref_key:"currencySelector",ref:s,horizontal:"center"},{default:e.withCtx(()=>{var f;return[e.createVNode(b.Button,{class:"currency-button",onClick:r[0]||(r[0]=()=>v()),label:(f=t.value)==null?void 0:f.symbol,mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["label"]),e.createVNode(C.PopoverMenu,{class:"currency-menu no-spacing",onSelect:r[1]||(r[1]=x=>p(x)),items:o.value,visible:l.value},null,8,["items","visible"])]}),_:1},512))}});const U=_._export_sfc(P,[["__scopeId","data-v-abdcf3a7"]]),R=e.defineComponent({__name:"Form",props:{fields:{},values:{}},setup(u){const d=u,{fields:n}=e.toRefs(d);return(c,m)=>(e.openBlock(),e.createBlock(L.GenericForm,{fields:e.unref(n),values:c.values},{"field(dropdown)":e.withCtx(({code:s,label:l,options:o,value:t})=>[l?(e.openBlock(),e.createBlock(w.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(b.Dropdown,{"onUpdate:modelValue":a=>c.$emit(`update:${s}`,a),items:o.items,modelValue:t},null,8,["onUpdate:modelValue","items","modelValue"])]),"field(info)":e.withCtx(({label:s})=>[e.createVNode(w.Info,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(s),1)]),_:2},1024)]),"field(input)":e.withCtx(({code:s,label:l,value:o})=>[l?(e.openBlock(),e.createBlock(w.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(b.Input,{"onUpdate:modelValue":t=>c.$emit(`update:${s}`,t),modelValue:o},null,8,["onUpdate:modelValue","modelValue"])]),_:1},8,["fields","values"]))}});const D=_._export_sfc(R,[["__scopeId","data-v-39d44946"]]),H=u=>(e.pushScopeId("data-v-85b21410"),u=u(),e.popScopeId(),u),O=H(()=>e.createElementVNode("div",{class:"menu-button-lines"},null,-1)),j=e.defineComponent({__name:"Header",emits:["menuToggle"],setup(u,{emit:d}){const n=()=>{document.documentElement.scrollTo({left:0,top:0})};return(c,m)=>(e.openBlock(),e.createBlock(h.Align,{class:"header",vertical:"center"},{default:e.withCtx(()=>[e.createVNode(h.Align,{class:"menu-button",onClick:m[0]||(m[0]=()=>d("menuToggle")),vertical:"center"},{default:e.withCtx(()=>[O]),_:1}),e.createVNode(h.Align,{class:"title",onClick:m[1]||(m[1]=()=>n()),vertical:"center"},{default:e.withCtx(()=>[e.createVNode(w.Info,{size:"large-2"},{default:e.withCtx(()=>[e.renderSlot(c.$slots,"title",{},void 0,!0)]),_:3})]),_:3}),e.createVNode(W.Separator),e.renderSlot(c.$slots,"end",{},void 0,!0)]),_:3}))}});const G=_._export_sfc(j,[["__scopeId","data-v-85b21410"]]),J=e.defineComponent({__name:"LocaleSelector",props:{locales:{},modelValue:{}},emits:["update:modelValue"],setup(u,{emit:d}){const n=u,{locales:c,modelValue:m}=e.toRefs(n),s=e.ref(),l=e.ref(!1),o=e.computed(()=>c.value.reduce((i,r)=>(i[r.code]={icon:r.icon,iconBackend:"flag-icons"},i),{})),t=e.computed(()=>c.value.find(i=>i.code===m.value).icon),a=i=>{var r;i&&((r=s.value)!=null&&r.$el.contains(i.target))||(l.value=!1,window.removeEventListener("mousedown",a))},v=()=>{l.value=!0,window.addEventListener("mousedown",a)},p=i=>{d("update:modelValue",i),a()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",a)}),(i,r)=>(e.openBlock(),e.createBlock(h.Align,{class:"locale-selector",ref_key:"localeSelector",ref:s,horizontal:"center"},{default:e.withCtx(()=>[e.createVNode(b.Button,{class:"locale-button",onClick:r[0]||(r[0]=()=>v()),icon:t.value,iconBackend:"flag-icons-square",mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["icon"]),e.createVNode(C.PopoverMenu,{class:"locale-menu no-spacing",onSelect:r[1]||(r[1]=f=>p(f)),items:o.value,visible:l.value},null,8,["items","visible"])]),_:1},512))}});const K=_._export_sfc(J,[["__scopeId","data-v-323ba705"]]),Q={key:0,class:"collapse"},X=e.defineComponent({__name:"Collapse",props:{expanded:{type:Boolean,default:!1}},setup(u){const d=u,{expanded:n}=e.toRefs(d),c=l=>{const o=l;o.style.height="auto"},m=l=>{const o=l,t=getComputedStyle(o).width;o.style.width=t,o.style.position="absolute",o.style.visibility="hidden",o.style.height="auto";const a=getComputedStyle(o).height;o.style.width="",o.style.position="",o.style.visibility="",o.style.height="0",getComputedStyle(o).height,requestAnimationFrame(()=>{o.style.height=a})},s=l=>{const o=l,t=getComputedStyle(o).height;o.style.height=t,getComputedStyle(o).height,requestAnimationFrame(()=>{o.style.height="0"})};return(l,o)=>(e.openBlock(),e.createBlock(e.Transition,{name:"collapse",onAfterEnter:c,onEnter:m,onLeave:s},{default:e.withCtx(()=>[e.unref(n)?(e.openBlock(),e.createElementBlock("div",Q,[e.renderSlot(l.$slots,"default",{},void 0,!0)])):e.createCommentVNode("",!0)]),_:3}))}});const Y=_._export_sfc(X,[["__scopeId","data-v-10c3004c"]]);class T extends F.BaseError{getMessage(d){return`Invalid menu item level ${d}`}}const Z=e.defineComponent({__name:"MenuItem",props:{active:{type:Boolean,default:!1},fullWidth:{type:Boolean},icon:{},iconBackend:{},label:{},level:{default:1},withSublevel:{type:Boolean,default:!1}},setup(u){const d=u,{active:n,fullWidth:c,icon:m,iconBackend:s,label:l,level:o,withSublevel:t}=e.toRefs(d),a=e.computed(()=>y.match(o.value).when(1,()=>"large-3").whenAny([2,3],()=>"large").or(r=>{throw new T(r)}).done),v=e.computed(()=>n.value?"elevated-2":"elevated"),p=e.computed(()=>y.match(o.value).when(1,()=>"large").whenAny([2,3],()=>"normal").or(r=>{throw new T(r)}).done),i=e.computed(()=>({active:n.value,"full-width":c.value,[`level-${o.value}`]:!0,"with-sublevel":t.value}));return(r,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["menu-item",i.value])},[e.unref(m)?(e.openBlock(),e.createBlock(h.Icon,{key:0,class:"item-icon",backend:e.unref(s),elevation:v.value,size:a.value,value:e.unref(m)},null,8,["backend","elevation","size","value"])):e.createCommentVNode("",!0),e.unref(c)&&e.unref(l)?(e.openBlock(),e.createBlock(w.Info,{key:1,elevation:v.value,size:p.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)),1)]),_:1},8,["elevation","size"])):e.createCommentVNode("",!0),e.unref(c)&&e.unref(t)?(e.openBlock(),e.createBlock(h.Icon,{key:2,class:"chevron",elevation:v.value,size:"large-3",value:"chevron-right"},null,8,["elevation"])):e.createCommentVNode("",!0)],2))}});const I=_._export_sfc(Z,[["__scopeId","data-v-a2af5406"]]),ee=e.defineComponent({__name:"MenuSubsection",props:{fullWidth:{type:Boolean},expandedPrefix:{},icon:{},iconBackend:{},items:{},label:{},level:{default:0},prefix:{},router:{},translator:{}},emits:["update:expandedPrefix"],setup(u,{emit:d}){const n=u,{expandedPrefix:c,icon:m,iconBackend:s,items:l,label:o,level:t,prefix:a,router:v,translator:p}=e.toRefs(n),i=e.computed(()=>v.value.currentRoute.value.meta.menuItem),r=e.computed(()=>t.value+1),f=e.computed(()=>t.value+1),x=k=>{d("update:expandedPrefix",a.value);const B=l.value[k];"items"in B||v.value.push(B.route)};return(k,B)=>{const N=e.resolveComponent("MenuSubsection",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(o)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(t)===0?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[k.fullWidth?(e.openBlock(),e.createBlock(w.Info,{key:0,class:"section",elevation:"elevated"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(p)(e.unref(o)).toUpperCase()),1)]),_:1})):(e.openBlock(),e.createBlock(h.Icon,{key:1,class:"section-collapsed",elevation:"elevated",size:"large-3",value:"dots-horizontal-rounded"}))],64)):(e.openBlock(),e.createBlock(I,{key:1,onClick:B[0]||(B[0]=()=>d("update:expandedPrefix",e.unref(a))),active:e.unref(c).startsWith(e.unref(a)),fullWidth:k.fullWidth,icon:e.unref(m),iconBackend:e.unref(s),label:k.fullWidth?e.unref(o):void 0,level:e.unref(t),withSublevel:""},null,8,["active","fullWidth","icon","iconBackend","label","level"]))],64)):e.createCommentVNode("",!0),e.createVNode(Y,{expanded:e.unref(t)===0||e.unref(c).startsWith(e.unref(a))},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),(g,V)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,["items"in g?(e.openBlock(),e.createBlock(N,{key:0,"onUpdate:expandedPrefix":B[1]||(B[1]=$=>d("update:expandedPrefix",$)),expandedPrefix:e.unref(c),fullWidth:k.fullWidth,icon:g.icon,iconBackend:g.iconBackend,items:g.items,level:f.value,label:g.label?e.unref(p)(g.label):"",prefix:`${e.unref(a)}${V}.`,router:e.unref(v),translator:e.unref(p)},null,8,["expandedPrefix","fullWidth","icon","iconBackend","items","level","label","prefix","router","translator"])):k.fullWidth||e.unref(t)===0?(e.openBlock(),e.createBlock(I,{key:1,onClick:()=>x(V),active:`${e.unref(a)}${V}`===i.value,fullWidth:k.fullWidth,icon:g.icon,iconBackend:g.iconBackend,label:k.fullWidth?e.unref(p)(g.label):void 0,level:r.value},null,8,["onClick","active","fullWidth","icon","iconBackend","label","level"])):e.createCommentVNode("",!0)],64))),256))]),_:1},8,["expanded"])],64)}}});const M=_._export_sfc(ee,[["__scopeId","data-v-fd041c1e"]]),te=u=>(e.pushScopeId("data-v-303139ca"),u=u(),e.popScopeId(),u),oe={class:"items"},ne=te(()=>e.createElementVNode("div",{class:"pixel"}," ",-1)),le=e.defineComponent({__name:"SideMenu",props:{brandText:{},fullWidth:{type:Boolean},menu:{},router:{},translator:{type:Function}},setup(u){const d=u,n=e.ref(""),c=e.ref(!1),{fullWidth:m,router:s}=e.toRefs(d),l=e.computed(()=>m.value||c.value);return e.watch(s.value.currentRoute,o=>{const t=o.meta.menuItem??"";n.value=t.substring(0,t.lastIndexOf(".")+1)},{immediate:!0}),(o,t)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["side-menu",{"full-width":l.value}]),onMouseenter:t[2]||(t[2]=a=>c.value=!0),onMouseleave:t[3]||(t[3]=a=>c.value=!1)},[e.createElementVNode("div",{class:"brand",onClick:t[0]||(t[0]=a=>e.unref(s).push({name:"default"}))},[e.createVNode(E.Logo),e.createVNode(z.BrandText,{elevation:"elevated-3",size:"large-4"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.brandText),1)]),_:1})]),e.createElementVNode("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.menu,(a,v)=>(e.openBlock(),e.createBlock(M,{expandedPrefix:n.value,"onUpdate:expandedPrefix":t[1]||(t[1]=p=>n.value=p),fullWidth:l.value,icon:a.icon,iconBackend:a.iconBackend,items:a.items,label:a.label??"",prefix:`${v}.`,router:e.unref(s),translator:o.translator},null,8,["expandedPrefix","fullWidth","icon","iconBackend","items","label","prefix","router","translator"]))),256)),ne])],34))}});const ae=_._export_sfc(le,[["__scopeId","data-v-303139ca"]]),ce=e.defineComponent({__name:"ThemeToggle",props:{modelValue:{}},emits:["update:modelValue"],setup(u,{emit:d}){const n=u,{modelValue:c}=e.toRefs(n),m=e.computed(()=>y.match(c.value).when("dark",()=>"moon").when("light",()=>"sun").or(o=>{throw new S.UndefinedThemeError(o)}).done),s=e.computed(()=>y.match(c.value).when("dark",()=>"accent").when("light",()=>"important").or(o=>{throw new S.UndefinedThemeError(o)}).done),l=()=>{const o=y.match(c.value).when("dark",()=>"light").when("light",()=>"dark").or(t=>{throw new S.UndefinedThemeError(t)}).done;d("update:modelValue",o)};return(o,t)=>(e.openBlock(),e.createBlock(h.Align,{class:"theme-toggle"},{default:e.withCtx(()=>[e.createVNode(b.Button,{onClick:t[0]||(t[0]=()=>l()),icon:m.value,mood:s.value,outline:"",size:"large-2",shape:"round"},null,8,["icon","mood"])]),_:1}))}});const re=_._export_sfc(ce,[["__scopeId","data-v-8832a6ee"]]),se={class:"toasts"},ue=e.defineComponent({__name:"Toasts",props:{toasts:{}},emits:["removeToast"],setup(u,{emit:d}){const n=u,{toasts:c}=e.toRefs(n),m=e.computed(()=>Object.entries(c.value).reverse().map(([t,a])=>[Number(t),a])),s=e.ref([]),l=e.ref([]),o=t=>{s.value.includes(t)||(s.value.push(t),clearTimeout(l.value[t]),delete l.value[t],window.setTimeout(()=>{d("removeToast",t),s.value=s.value.filter(a=>a!==t)},500))};return e.watch(c,()=>{for(const t of c.value)t.id in l.value||(l.value[t.id]=window.setTimeout(()=>{o(t.id)},5e3))},{deep:!0,immediate:!0}),(t,a)=>(e.openBlock(),e.createElementBlock("div",se,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,([v,p])=>(e.openBlock(),e.createBlock(C.Toast,{onClick:()=>o(v),class:e.normalizeClass({"fade-out":s.value.includes(p.id)}),icon:p.icon,iconBackend:p.iconBackend,key:`toast-${p.id}`,mood:p.mood,message:p.message,title:p.title},null,8,["onClick","class","icon","iconBackend","mood","message","title"]))),128))]))}});const ie=_._export_sfc(ue,[["__scopeId","data-v-3d45b4ea"]]);exports.AccountMenu=A;exports.CurrencySelector=U;exports.Form=D;exports.Header=G;exports.LocaleSelector=K;exports.SideMenu=ae;exports.SideMenuItem=I;exports.SideMenuSubsection=M;exports.ThemeToggle=re;exports.Toasts=ie;
