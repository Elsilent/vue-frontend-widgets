"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),w=require("./Icon-80a3c9ab.cjs"),I=require("./Logo-bd6e4e96.cjs"),y=require("./Toast-ab8b3104.cjs"),B=require("./_plugin-vue_export-helper-f246444f.cjs"),h=require("./Input-47bca9be.cjs"),M=require("./Form-d76f9656.cjs"),b=require("./Info-ad8c31fe.cjs"),N=require("./marker.cjs"),E=require("./BrandText-9e6e16c6.cjs"),L=require("./utils/error.cjs"),g=require("./match-5382edcf.cjs"),x=require("./undefined_theme-019f6866.cjs");require("./Popover-5322298f.cjs");const q=e.defineComponent({__name:"AccountMenu",props:{avatar:{},menuItems:{}},setup(d){const m=d,{avatar:n,menuItems:c}=e.toRefs(m),v=e.computed(()=>n&&n.value&&"icon"in n.value?n.value.icon:void 0),l=e.computed(()=>n&&n.value&&"iconBackend"in n.value?n.value.iconBackend:void 0),a=e.computed(()=>n&&n.value&&"label"in n.value?n.value.label:void 0),i=e.computed(()=>n&&n.value&&"source"in n.value?n.value.source:void 0),t=e.ref(),u=e.ref(!1),p=o=>{var s;o&&((s=t.value)!=null&&s.$el.contains(o.target))||(u.value=!1,window.removeEventListener("mousedown",p))},_=()=>{u.value=!0,window.addEventListener("mousedown",p)},r=o=>{c.value[o].handler(),p()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",p)}),(o,s)=>(e.openBlock(),e.createBlock(w.Align,{class:"account-menu",ref_key:"accountMenu",ref:t},{default:e.withCtx(()=>[e.createVNode(I.Avatar,{onClick:s[0]||(s[0]=f=>_()),onFocus:s[1]||(s[1]=f=>_()),onBlur:s[2]||(s[2]=f=>p()),icon:v.value,iconBackend:l.value,label:a.value,source:i.value},null,8,["icon","iconBackend","label","source"]),e.createVNode(y.PopoverMenu,{class:"account-menu",onSelect:s[3]||(s[3]=f=>r(f)),items:e.unref(c),visible:u.value},null,8,["items","visible"])]),_:1},512))}});const z=B._export_sfc(q,[["__scopeId","data-v-12c732ef"]]),F=e.defineComponent({__name:"CurrencySelector",props:{currencies:{},modelValue:{}},emits:["update:modelValue"],setup(d,{emit:m}){const n=d,{currencies:c,modelValue:v}=e.toRefs(n),l=e.ref(),a=e.ref(!1),i=e.computed(()=>c.value.reduce((r,o)=>(r[o.code]={label:o.label},r),{})??{}),t=e.computed(()=>c.value.find(({code:r})=>v.value===r)),u=r=>{var o,s;r&&((o=l.value)!=null&&o.$el.contains(r.target))||((s=l.value)==null||s.$el.querySelector(".button").blur(),a.value=!1,window.removeEventListener("mousedown",u))},p=()=>{a.value=!0,window.addEventListener("mousedown",u)},_=r=>{m("update:modelValue",r),u()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",u)}),(r,o)=>(e.openBlock(),e.createBlock(w.Align,{class:"currency-selector",ref_key:"currencySelector",ref:l,horizontal:"center"},{default:e.withCtx(()=>{var s;return[e.createVNode(h.Button,{class:"currency-button",onClick:o[0]||(o[0]=f=>p()),onFocus:o[1]||(o[1]=f=>p()),onBlur:o[2]||(o[2]=f=>u()),label:(s=t.value)==null?void 0:s.symbol,mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["label"]),e.createVNode(y.PopoverMenu,{class:"currency-menu no-spacing",onSelect:o[3]||(o[3]=f=>_(f)),items:i.value,visible:a.value},null,8,["items","visible"])]}),_:1},512))}});const A=B._export_sfc(F,[["__scopeId","data-v-91f9ede2"]]),U=e.defineComponent({__name:"Form",props:{fields:{},values:{}},setup(d){const m=d,{fields:n}=e.toRefs(m);return(c,v)=>(e.openBlock(),e.createBlock(M.GenericForm,{fields:e.unref(n),values:c.values},{"field(dropdown)":e.withCtx(({code:l,label:a,options:i,value:t})=>[a?(e.openBlock(),e.createBlock(b.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(h.Dropdown,{"onUpdate:modelValue":u=>c.$emit(`update:${l}`,u),items:i.items,modelValue:t},null,8,["onUpdate:modelValue","items","modelValue"])]),"field(info)":e.withCtx(({label:l})=>[e.createVNode(b.Info,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l),1)]),_:2},1024)]),"field(input)":e.withCtx(({code:l,label:a,value:i})=>[a?(e.openBlock(),e.createBlock(b.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(h.Input,{"onUpdate:modelValue":t=>c.$emit(`update:${l}`,t),modelValue:i},null,8,["onUpdate:modelValue","modelValue"])]),_:1},8,["fields","values"]))}});const R=B._export_sfc(U,[["__scopeId","data-v-39d44946"]]),D=e.defineComponent({__name:"Header",setup(d){const m=()=>{document.documentElement.scrollTo({left:0,top:0})};return(n,c)=>(e.openBlock(),e.createBlock(w.Align,{class:"header",vertical:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",{class:"title",onClick:c[0]||(c[0]=()=>m())},[e.createVNode(b.Info,{size:"large-2"},{default:e.withCtx(()=>[e.renderSlot(n.$slots,"title",{},void 0,!0)]),_:3})]),e.createVNode(N.Separator),e.renderSlot(n.$slots,"end",{},void 0,!0)]),_:3}))}});const H=B._export_sfc(D,[["__scopeId","data-v-b7acc042"]]),P=e.defineComponent({__name:"LocaleSelector",props:{locales:{},modelValue:{}},emits:["update:modelValue"],setup(d,{emit:m}){const n=d,{locales:c,modelValue:v}=e.toRefs(n),l=e.ref(),a=e.ref(!1),i=e.computed(()=>c.value.reduce((r,o)=>(r[o.code]={icon:o.icon,iconBackend:"flag-icons"},r),{})),t=e.computed(()=>c.value.find(r=>r.code===v.value).icon),u=r=>{var o,s;r&&((o=l.value)!=null&&o.$el.contains(r.target))||(a.value=!1,(s=l.value)==null||s.$el.querySelector(".button").blur(),window.removeEventListener("mousedown",u))},p=()=>{a.value=!0,window.addEventListener("mousedown",u)},_=r=>{m("update:modelValue",r),u()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",u)}),(r,o)=>(e.openBlock(),e.createBlock(w.Align,{class:"locale-selector",ref_key:"localeSelector",ref:l,horizontal:"center"},{default:e.withCtx(()=>[e.createVNode(h.Button,{class:"locale-button",onClick:o[0]||(o[0]=s=>p()),onFocus:o[1]||(o[1]=s=>p()),onBlur:o[2]||(o[2]=s=>u()),icon:t.value,iconBackend:"flag-icons-square",mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["icon"]),e.createVNode(y.PopoverMenu,{class:"locale-menu no-spacing",onSelect:o[3]||(o[3]=s=>_(s)),items:i.value,visible:a.value},null,8,["items","visible"])]),_:1},512))}});const j=B._export_sfc(P,[["__scopeId","data-v-d44715a8"]]);class S extends L.BaseError{getMessage(m){return`Invalid menu item level ${m}`}}const O=e.defineComponent({__name:"MenuItem",props:{active:{type:Boolean,default:!1},icon:{},iconBackend:{},label:{},level:{default:1},withSublevel:{type:Boolean,default:!1},link:{}},setup(d){const m=d,{active:n,icon:c,iconBackend:v,label:l,level:a,withSublevel:i}=e.toRefs(m),t=e.computed(()=>g.match(a.value).when(1,()=>"large-3").whenAny([2,3],()=>"large").or(r=>{throw new S(r)}).done),u=e.computed(()=>n.value?"elevated-2":"elevated"),p=e.computed(()=>g.match(a.value).when(1,()=>"large").whenAny([2,3],()=>"normal").or(r=>{throw new S(r)}).done),_=e.computed(()=>({active:n.value,[`level-${a.value}`]:!0,"with-sublevel":i.value}));return(r,o)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(r.link?"a":"div"),{class:e.normalizeClass(["menu-item",_.value]),href:r.link?r.link:void 0},{default:e.withCtx(()=>[e.unref(c)?(e.openBlock(),e.createBlock(w.Icon,{key:0,class:"item-icon",backend:e.unref(v),elevation:u.value,size:t.value,value:e.unref(c)},null,8,["backend","elevation","size","value"])):e.createCommentVNode("",!0),e.createVNode(b.Info,{elevation:u.value,size:p.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(l)),1)]),_:1},8,["elevation","size"]),e.unref(i)?(e.openBlock(),e.createBlock(w.Icon,{key:1,class:"chevron",elevation:u.value,size:"large-3",value:"chevron-right"},null,8,["elevation"])):e.createCommentVNode("",!0)]),_:1},8,["class","href"]))}});const C=B._export_sfc(O,[["__scopeId","data-v-78a874f4"]]),G=e.defineComponent({__name:"MenuSubsection",props:{icon:{},iconBackend:{},items:{},label:{},level:{default:0},prefix:{},router:{},translator:{}},setup(d){const m=d,{icon:n,iconBackend:c,items:v,label:l,level:a,prefix:i,router:t,translator:u}=e.toRefs(m),p=e.computed(()=>t.value.currentRoute.value.meta.menuItem),_=e.computed(()=>Object.entries(v.value).some(([s,f])=>"route"in f&&`${i.value}${s}`===p.value)),r=e.computed(()=>a.value+1),o=e.computed(()=>a.value+1);return(s,f)=>{const T=e.resolveComponent("MenuSubsection",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(l)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(a)===0?(e.openBlock(),e.createBlock(b.Info,{key:0,class:"section",elevation:"elevated"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(u)(e.unref(l)).toUpperCase()),1)]),_:1})):(e.openBlock(),e.createBlock(C,{key:1,active:_.value,icon:e.unref(n),iconBackend:e.unref(c),label:e.unref(l),level:e.unref(a),withSublevel:""},null,8,["active","icon","iconBackend","label","level"]))],64)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(v),(k,V)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,["items"in k?(e.openBlock(),e.createBlock(T,{key:0,icon:k.icon,iconBackend:k.iconBackend,items:k.items,level:o.value,label:k.label?e.unref(u)(k.label):"",prefix:`${e.unref(i)}${V}.`,router:e.unref(t),translator:e.unref(u)},null,8,["icon","iconBackend","items","level","label","prefix","router","translator"])):(e.openBlock(),e.createBlock(C,{key:1,onClick:e.withModifiers(()=>e.unref(t).push(k.route),["prevent"]),active:`${e.unref(i)}${V}`===p.value,icon:k.icon,iconBackend:k.iconBackend,label:e.unref(u)(k.label),level:r.value,link:e.unref(t).resolve({name:k.route.name}).href},null,8,["onClick","active","icon","iconBackend","label","level","link"]))],64))),256))],64)}}});const $=B._export_sfc(G,[["__scopeId","data-v-e2b93ab7"]]),J=d=>(e.pushScopeId("data-v-00bfa0a4"),d=d(),e.popScopeId(),d),K={class:"side-menu"},Q={class:"items"},W=J(()=>e.createElementVNode("div",{class:"pixel"},"Â ",-1)),X=e.defineComponent({__name:"SideMenu",props:{brandText:{},menu:{},router:{},translator:{type:Function}},setup(d){const m=d,{router:n}=e.toRefs(m);return(c,v)=>(e.openBlock(),e.createElementBlock("div",K,[e.createElementVNode("div",{class:"brand",onClick:v[0]||(v[0]=l=>e.unref(n).push({name:"default"}))},[e.createVNode(I.Logo),e.createVNode(E.BrandText,{elevation:"elevated-3",size:"large-4"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.brandText),1)]),_:1})]),e.createElementVNode("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.menu,(l,a)=>(e.openBlock(),e.createBlock($,{icon:l.icon,iconBackend:l.iconBackend,items:l.items,label:l.label??"",prefix:`${a}.`,router:e.unref(n),translator:c.translator},null,8,["icon","iconBackend","items","label","prefix","router","translator"]))),256)),W])]))}});const Y=B._export_sfc(X,[["__scopeId","data-v-00bfa0a4"]]),Z=e.defineComponent({__name:"ThemeToggle",props:{modelValue:{}},emits:["update:modelValue"],setup(d,{emit:m}){const n=d,{modelValue:c}=e.toRefs(n),v=e.computed(()=>g.match(c.value).when("dark",()=>"moon").when("light",()=>"sun").or(i=>{throw new x.UndefinedThemeError(i)}).done),l=e.computed(()=>g.match(c.value).when("dark",()=>"accent").when("light",()=>"important").or(i=>{throw new x.UndefinedThemeError(i)}).done),a=()=>{const i=g.match(c.value).when("dark",()=>"light").when("light",()=>"dark").or(t=>{throw new x.UndefinedThemeError(t)}).done;m("update:modelValue",i)};return(i,t)=>(e.openBlock(),e.createBlock(w.Align,{class:"theme-toggle"},{default:e.withCtx(()=>[e.createVNode(h.Button,{onClick:t[0]||(t[0]=()=>a()),icon:v.value,mood:l.value,outline:"",size:"large-2",shape:"round"},null,8,["icon","mood"])]),_:1}))}});const ee=B._export_sfc(Z,[["__scopeId","data-v-8832a6ee"]]),oe={class:"toasts"},ne=e.defineComponent({__name:"Toasts",props:{toasts:{}},emits:["removeToast"],setup(d,{emit:m}){const n=d,{toasts:c}=e.toRefs(n),v=e.computed(()=>Object.entries(c.value).reverse().map(([t,u])=>[Number(t),u])),l=e.ref([]),a=e.ref([]),i=t=>{l.value.includes(t)||(l.value.push(t),clearTimeout(a.value[t]),delete a.value[t],window.setTimeout(()=>{m("removeToast",t),l.value=l.value.filter(u=>u!==t)},500))};return e.watch(c,()=>{for(const t of c.value)t.id in a.value||(a.value[t.id]=window.setTimeout(()=>{i(t.id)},5e3))},{deep:!0,immediate:!0}),(t,u)=>(e.openBlock(),e.createElementBlock("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(v.value,([p,_])=>(e.openBlock(),e.createBlock(y.Toast,{onClick:()=>i(p),class:e.normalizeClass({"fade-out":l.value.includes(_.id)}),icon:_.icon,iconBackend:_.iconBackend,key:`toast-${_.id}`,mood:_.mood,message:_.message,title:_.title},null,8,["onClick","class","icon","iconBackend","mood","message","title"]))),128))]))}});const te=B._export_sfc(ne,[["__scopeId","data-v-3d45b4ea"]]);exports.AccountMenu=z;exports.CurrencySelector=A;exports.Form=R;exports.Header=H;exports.LocaleSelector=j;exports.SideMenu=Y;exports.SideMenuItem=C;exports.SideMenuSubsection=$;exports.ThemeToggle=ee;exports.Toasts=te;
