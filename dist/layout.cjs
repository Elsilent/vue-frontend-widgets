"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),B=require("./Icon-80a3c9ab.cjs"),I=require("./Logo-3e2ad6a2.cjs"),w=require("./Toast-9678848c.cjs"),k=require("./_plugin-vue_export-helper-f246444f.cjs"),C=require("./Input-0950264b.cjs"),N=require("./Form-d76f9656.cjs"),g=require("./Info-ad8c31fe.cjs"),$=require("./marker.cjs"),E=require("./BrandText-9e6e16c6.cjs"),L=require("./utils/error.cjs"),b=require("./match-5382edcf.cjs"),x=require("./undefined_theme-019f6866.cjs");require("./Popover-5322298f.cjs");const z=e.defineComponent({__name:"AccountMenu",props:{avatar:{},menuItems:{}},setup(i){const d=i,{avatar:o,menuItems:c}=e.toRefs(d),m=e.computed(()=>o&&o.value&&"icon"in o.value?o.value.icon:void 0),t=e.computed(()=>o&&o.value&&"iconBackend"in o.value?o.value.iconBackend:void 0),l=e.computed(()=>o&&o.value&&"label"in o.value?o.value.label:void 0),u=e.computed(()=>o&&o.value&&"source"in o.value?o.value.source:void 0),n=e.ref(),s=e.ref(!1),p=r=>{var _;r&&((_=n.value)!=null&&_.$el.contains(r.target))||(s.value=!1,window.removeEventListener("mousedown",p))},v=()=>{s.value=!0,window.addEventListener("mousedown",p)},a=r=>{c.value[r].handler(),p()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",p)}),(r,_)=>(e.openBlock(),e.createBlock(B.Align,{class:"account-menu",ref_key:"accountMenu",ref:n},{default:e.withCtx(()=>[e.createVNode(I.Avatar,{onClick:_[0]||(_[0]=()=>v()),icon:m.value,iconBackend:t.value,label:l.value,source:u.value},null,8,["icon","iconBackend","label","source"]),e.createVNode(w.PopoverMenu,{class:"account-menu",onSelect:_[1]||(_[1]=h=>a(h)),items:e.unref(c),visible:s.value},null,8,["items","visible"])]),_:1},512))}});const q=k._export_sfc(z,[["__scopeId","data-v-1e965d9d"]]),F=e.defineComponent({__name:"CurrencySelector",props:{currencies:{},modelValue:{}},emits:["update:modelValue"],setup(i,{emit:d}){const o=i,{currencies:c,modelValue:m}=e.toRefs(o),t=e.ref(),l=e.ref(!1),u=e.computed(()=>c.value.reduce((a,r)=>(a[r.code]={label:r.label},a),{})??{}),n=e.computed(()=>c.value.find(({code:a})=>m.value===a)),s=a=>{var r;a&&((r=t.value)!=null&&r.$el.contains(a.target))||(console.log("hi"),l.value=!1,window.removeEventListener("mousedown",s))},p=()=>{l.value=!0,window.addEventListener("mousedown",s)},v=a=>{d("update:modelValue",a),s()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",s)}),(a,r)=>(e.openBlock(),e.createBlock(B.Align,{class:"currency-selector",ref_key:"currencySelector",ref:t,horizontal:"center"},{default:e.withCtx(()=>{var _;return[e.createVNode(w.Button,{class:"currency-button",onClick:r[0]||(r[0]=()=>p()),label:(_=n.value)==null?void 0:_.symbol,mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["label"]),e.createVNode(w.PopoverMenu,{class:"currency-menu no-spacing",onSelect:r[1]||(r[1]=h=>v(h)),items:u.value,visible:l.value},null,8,["items","visible"])]}),_:1},512))}});const A=k._export_sfc(F,[["__scopeId","data-v-6ae04671"]]),U=e.defineComponent({__name:"Form",props:{fields:{},values:{}},setup(i){const d=i,{fields:o}=e.toRefs(d);return(c,m)=>(e.openBlock(),e.createBlock(N.GenericForm,{fields:e.unref(o),values:c.values},{"field(dropdown)":e.withCtx(({code:t,label:l,options:u,value:n})=>[l?(e.openBlock(),e.createBlock(g.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(C.Dropdown,{"onUpdate:modelValue":s=>c.$emit(`update:${t}`,s),items:u.items,modelValue:n},null,8,["onUpdate:modelValue","items","modelValue"])]),"field(info)":e.withCtx(({label:t})=>[e.createVNode(g.Info,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t),1)]),_:2},1024)]),"field(input)":e.withCtx(({code:t,label:l,value:u})=>[l?(e.openBlock(),e.createBlock(g.Info,{key:0,class:"label"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(l),1)]),_:2},1024)):e.createCommentVNode("",!0),e.createVNode(C.Input,{"onUpdate:modelValue":n=>c.$emit(`update:${t}`,n),modelValue:u},null,8,["onUpdate:modelValue","modelValue"])]),_:1},8,["fields","values"]))}});const R=k._export_sfc(U,[["__scopeId","data-v-39d44946"]]),D=e.defineComponent({__name:"Header",setup(i){const d=()=>{document.documentElement.scrollTo({left:0,top:0})};return(o,c)=>(e.openBlock(),e.createBlock(B.Align,{class:"header",vertical:"center"},{default:e.withCtx(()=>[e.createElementVNode("div",{class:"title",onClick:c[0]||(c[0]=()=>d())},[e.createVNode(g.Info,{size:"large-2"},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"title",{},void 0,!0)]),_:3})]),e.createVNode($.Separator),e.renderSlot(o.$slots,"end",{},void 0,!0)]),_:3}))}});const H=k._export_sfc(D,[["__scopeId","data-v-71be6924"]]),P=e.defineComponent({__name:"LocaleSelector",props:{locales:{},modelValue:{}},emits:["update:modelValue"],setup(i,{emit:d}){const o=i,{locales:c,modelValue:m}=e.toRefs(o),t=e.ref(),l=e.ref(!1),u=e.computed(()=>c.value.reduce((a,r)=>(a[r.code]={icon:r.icon,iconBackend:"flag-icons"},a),{})),n=e.computed(()=>c.value.find(a=>a.code===m.value).icon),s=a=>{var r;a&&((r=t.value)!=null&&r.$el.contains(a.target))||(l.value=!1,window.removeEventListener("mousedown",s))},p=()=>{l.value=!0,window.addEventListener("mousedown",s)},v=a=>{d("update:modelValue",a),s()};return e.onUnmounted(()=>{window.removeEventListener("mousedown",s)}),(a,r)=>(e.openBlock(),e.createBlock(B.Align,{class:"locale-selector",ref_key:"localeSelector",ref:t,horizontal:"center"},{default:e.withCtx(()=>[e.createVNode(w.Button,{class:"locale-button",onClick:r[0]||(r[0]=()=>p()),icon:n.value,iconBackend:"flag-icons-square",mood:"neutral",outline:"",size:"large-3",shape:"round"},null,8,["icon"]),e.createVNode(w.PopoverMenu,{class:"locale-menu no-spacing",onSelect:r[1]||(r[1]=_=>v(_)),items:u.value,visible:l.value},null,8,["items","visible"])]),_:1},512))}});const j=k._export_sfc(P,[["__scopeId","data-v-bee84f7a"]]);class S extends L.BaseError{getMessage(d){return`Invalid menu item level ${d}`}}const O=e.defineComponent({__name:"MenuItem",props:{active:{type:Boolean,default:!1},icon:{},iconBackend:{},label:{},level:{default:1},withSublevel:{type:Boolean,default:!1}},setup(i){const d=i,{active:o,icon:c,iconBackend:m,label:t,level:l,withSublevel:u}=e.toRefs(d),n=e.computed(()=>b.match(l.value).when(1,()=>"large-3").whenAny([2,3],()=>"large").or(a=>{throw new S(a)}).done),s=e.computed(()=>o.value?"elevated-2":"elevated"),p=e.computed(()=>b.match(l.value).when(1,()=>"large").whenAny([2,3],()=>"normal").or(a=>{throw new S(a)}).done),v=e.computed(()=>({active:o.value,[`level-${l.value}`]:!0,"with-sublevel":u.value}));return(a,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["menu-item",v.value])},[e.unref(c)?(e.openBlock(),e.createBlock(B.Icon,{key:0,class:"item-icon",backend:e.unref(m),elevation:s.value,size:n.value,value:e.unref(c)},null,8,["backend","elevation","size","value"])):e.createCommentVNode("",!0),e.createVNode(g.Info,{elevation:s.value,size:p.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(t)),1)]),_:1},8,["elevation","size"]),e.unref(u)?(e.openBlock(),e.createBlock(B.Icon,{key:1,class:"chevron",elevation:s.value,size:"large-3",value:"chevron-right"},null,8,["elevation"])):e.createCommentVNode("",!0)],2))}});const y=k._export_sfc(O,[["__scopeId","data-v-fb1cb1dd"]]),G=e.defineComponent({__name:"MenuSubsection",props:{icon:{},iconBackend:{},items:{},label:{},level:{default:0},prefix:{},router:{},translator:{}},setup(i){const d=i,{icon:o,iconBackend:c,items:m,label:t,level:l,prefix:u,router:n,translator:s}=e.toRefs(d),p=e.computed(()=>n.value.currentRoute.value.meta.menuItem),v=e.computed(()=>Object.entries(m.value).some(([_,h])=>"route"in h&&`${u.value}${_}`===p.value)),a=e.computed(()=>l.value+1),r=e.computed(()=>l.value+1);return(_,h)=>{const M=e.resolveComponent("MenuSubsection",!0);return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(t)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(l)===0?(e.openBlock(),e.createBlock(g.Info,{key:0,class:"section",elevation:"elevated"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(s)(e.unref(t)).toUpperCase()),1)]),_:1})):(e.openBlock(),e.createBlock(y,{key:1,active:v.value,icon:e.unref(o),iconBackend:e.unref(c),label:e.unref(t),level:e.unref(l),withSublevel:""},null,8,["active","icon","iconBackend","label","level"]))],64)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),(f,V)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,["items"in f?(e.openBlock(),e.createBlock(M,{key:0,icon:f.icon,iconBackend:f.iconBackend,items:f.items,level:r.value,label:f.label?e.unref(s)(f.label):"",prefix:`${e.unref(u)}${V}.`,router:e.unref(n),translator:e.unref(s)},null,8,["icon","iconBackend","items","level","label","prefix","router","translator"])):(e.openBlock(),e.createBlock(y,{key:1,onClick:()=>e.unref(n).push(f.route),active:`${e.unref(u)}${V}`===p.value,icon:f.icon,iconBackend:f.iconBackend,label:e.unref(s)(f.label),level:a.value},null,8,["onClick","active","icon","iconBackend","label","level"]))],64))),256))],64)}}});const T=k._export_sfc(G,[["__scopeId","data-v-284e669f"]]),J=i=>(e.pushScopeId("data-v-00bfa0a4"),i=i(),e.popScopeId(),i),K={class:"side-menu"},Q={class:"items"},W=J(()=>e.createElementVNode("div",{class:"pixel"},"Â ",-1)),X=e.defineComponent({__name:"SideMenu",props:{brandText:{},menu:{},router:{},translator:{type:Function}},setup(i){const d=i,{router:o}=e.toRefs(d);return(c,m)=>(e.openBlock(),e.createElementBlock("div",K,[e.createElementVNode("div",{class:"brand",onClick:m[0]||(m[0]=t=>e.unref(o).push({name:"default"}))},[e.createVNode(I.Logo),e.createVNode(E.BrandText,{elevation:"elevated-3",size:"large-4"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(c.brandText),1)]),_:1})]),e.createElementVNode("div",Q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.menu,(t,l)=>(e.openBlock(),e.createBlock(T,{icon:t.icon,iconBackend:t.iconBackend,items:t.items,label:t.label??"",prefix:`${l}.`,router:e.unref(o),translator:c.translator},null,8,["icon","iconBackend","items","label","prefix","router","translator"]))),256)),W])]))}});const Y=k._export_sfc(X,[["__scopeId","data-v-00bfa0a4"]]),Z=e.defineComponent({__name:"ThemeToggle",props:{modelValue:{}},emits:["update:modelValue"],setup(i,{emit:d}){const o=i,{modelValue:c}=e.toRefs(o),m=e.computed(()=>b.match(c.value).when("dark",()=>"moon").when("light",()=>"sun").or(u=>{throw new x.UndefinedThemeError(u)}).done),t=e.computed(()=>b.match(c.value).when("dark",()=>"accent").when("light",()=>"important").or(u=>{throw new x.UndefinedThemeError(u)}).done),l=()=>{const u=b.match(c.value).when("dark",()=>"light").when("light",()=>"dark").or(n=>{throw new x.UndefinedThemeError(n)}).done;d("update:modelValue",u)};return(u,n)=>(e.openBlock(),e.createBlock(B.Align,{class:"theme-toggle"},{default:e.withCtx(()=>[e.createVNode(w.Button,{onClick:n[0]||(n[0]=()=>l()),icon:m.value,mood:t.value,outline:"",size:"large-2",shape:"round"},null,8,["icon","mood"])]),_:1}))}});const ee=k._export_sfc(Z,[["__scopeId","data-v-2d6e4878"]]),oe={class:"toasts"},ne=e.defineComponent({__name:"Toasts",props:{toasts:{}},emits:["removeToast"],setup(i,{emit:d}){const o=i,{toasts:c}=e.toRefs(o),m=e.computed(()=>Object.entries(c.value).reverse().map(([n,s])=>[Number(n),s])),t=e.ref([]),l=e.ref([]),u=n=>{t.value.includes(n)||(t.value.push(n),clearTimeout(l.value[n]),delete l.value[n],window.setTimeout(()=>{d("removeToast",n),t.value=t.value.filter(s=>s!==n)},500))};return e.watch(c,()=>{for(const n of c.value)n.id in l.value||(l.value[n.id]=window.setTimeout(()=>{u(n.id)},3e3))},{deep:!0,immediate:!0}),(n,s)=>(e.openBlock(),e.createElementBlock("div",oe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,([p,v])=>(e.openBlock(),e.createBlock(w.Toast,{onClick:()=>u(p),class:e.normalizeClass({"fade-out":t.value.includes(v.id)}),icon:v.icon,iconBackend:v.iconBackend,key:`toast-${v.id}`,mood:v.mood,message:v.message,title:v.title},null,8,["onClick","class","icon","iconBackend","mood","message","title"]))),128))]))}});const te=k._export_sfc(ne,[["__scopeId","data-v-f321e502"]]);exports.AccountMenu=q;exports.CurrencySelector=A;exports.Form=R;exports.Header=H;exports.LocaleSelector=j;exports.SideMenu=Y;exports.SideMenuItem=y;exports.SideMenuSubsection=T;exports.ThemeToggle=ee;exports.Toasts=te;
