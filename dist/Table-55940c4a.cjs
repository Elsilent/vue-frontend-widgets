"use strict";const e=require("vue"),se=require("./_plugin-vue_export-helper-f246444f.cjs"),pe=require("./datetime-a6d0f4bc.cjs"),he=require("./Icon-80a3c9ab.cjs"),ge={class:"scrollbar"},Ce=e.defineComponent({__name:"ScrollableArea",props:{active:{type:Boolean},mode:{},thumbOffset:{},thumbSize:{}},emits:["mousedown"],setup(Q,{emit:D}){const Y=Q,{active:W,mode:F,thumbOffset:U,thumbSize:_}=e.toRefs(Y),v=e.computed(()=>{const[i,B]=F.value==="vertical"?["top","height"]:["left","width"];return{[i]:`calc(3px + ${U.value} * (100% - ${_.value} - 6px))`,[B]:`${_.value}`}});return(i,B)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["scrollable-area",{active:e.unref(W),[e.unref(F)]:!0}]),onMousedown:B[0]||(B[0]=e.withModifiers(y=>D("mousedown",y),["stop"]))},[e.createElementVNode("div",ge,[e.createElementVNode("div",{class:"thumb",style:e.normalizeStyle(v.value)},null,4)])],34))}});const ne=se._export_sfc(Ce,[["__scopeId","data-v-56aba386"]]),be=e.defineComponent({__name:"Scrollable",props:{contentClass:{},mode:{default:"vertical"},optimized:{type:Boolean,default:!1},relativeTo:{},scrollPosition:{default:()=>({left:0,top:0})},scrollHeightDelta:{default:0},scrollWidthDelta:{default:0},staticPosition:{type:Boolean,default:!1},updateKey:{}},emits:["update:scrollPosition"],setup(Q,{emit:D}){const Y=Q,{mode:W,relativeTo:F,scrollPosition:U,scrollHeightDelta:_,scrollWidthDelta:v,staticPosition:i}=e.toRefs(Y),B=e.ref(!1),y=e.ref(0),S=e.ref(0),O=e.ref(0),g=e.ref(0),b=e.ref(),j=e.ref(),q=e.ref(),A=e.ref(),M=e.ref(),z=e.ref(0),k=e.ref(0),f=e.ref(),N=e.computed(()=>z.value/(g.value-S.value)),L=e.computed(()=>`max(56px, (100% - 14px) * ${S.value/g.value})`),V=e.computed(()=>`max(56px, (100% - 14px) * ${y.value/O.value})`),J=e.computed(()=>k.value/(O.value-y.value)),$=e.ref();e.onUnmounted(()=>{T.disconnect(),ee.disconnect()});const p=()=>{b.value&&(f.value!==void 0&&(clearTimeout(f.value),f.value=void 0),B.value=!1,b.value=void 0)},X=()=>F!=null&&F.value?F.value():$.value,P=u=>{const H=X();H&&H.scrollTo(u)},Z=u=>{P({left:((A==null?void 0:A.value)??0)+u*g.value/(S.value-v.value)})},K=u=>{P({top:((M==null?void 0:M.value)??0)+u*O.value/(y.value-_.value)})},G=u=>{if(b.value){switch(b.value){case"horizontal":Z(u.clientX-((j==null?void 0:j.value)??0));break;case"vertical":K(u.clientY-((q==null?void 0:q.value)??0));break}u.preventDefault()}},s=()=>{b.value=void 0,le(),window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",s)},c=(u,H)=>{p(),B.value=!0,b.value=H;const R=X();switch(b.value){case"horizontal":j.value=u.clientX,A.value=(R==null?void 0:R.scrollLeft)??0;break;case"vertical":q.value=u.clientY,M.value=(R==null?void 0:R.scrollTop)??0;break}window.addEventListener("mousemove",G),window.addEventListener("mouseup",s)},l=u=>{y.value!==u.clientHeight&&(y.value=u.clientHeight)},d=u=>{S.value!==u.clientWidth&&(S.value=u.clientWidth)},h=u=>{O.value!==u.scrollHeight&&(O.value=u.scrollHeight)},E=u=>{g.value!==u.scrollWidth&&(g.value=u.scrollWidth)},I=u=>{z.value=u.scrollLeft,D("update:scrollPosition",{left:z.value,top:k.value})},x=u=>{k.value=u.scrollTop,D("update:scrollPosition",{left:z.value,top:k.value})},w=()=>{const u=X();u&&(l(u),d(u),h(u),E(u))},T=new MutationObserver(()=>w()),ee=new ResizeObserver(()=>w()),te=u=>{I(u.target),x(u.target)},le=()=>{w(),!b.value&&(p(),B.value=!0,f.value=window.setTimeout(()=>{B.value=!1},2500))},re=()=>{T.disconnect(),ee.disconnect();const u=X();u&&(T.observe(u,{childList:!0,subtree:!0}),ee.observe(u))};return e.onMounted(()=>{re()}),e.watch(F,()=>re()),e.watch(U,u=>{z.value=u.left,k.value=u.top,e.nextTick(()=>P(u))},{deep:!0,immediate:!0}),(u,H)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["scrollable",{[`mode-${e.unref(W)}`]:!0,static:e.unref(i)}])},[u.optimized?e.withMemo([u.updateKey],()=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["scrollable-content",u.contentClass]),ref_key:"content",ref:$,key:u.updateKey,onMousemove:le,onScroll:te},[e.renderSlot(u.$slots,"default",{},void 0,!0)],34)),H,0):(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass(["scrollable-content",u.contentClass]),ref_key:"content",ref:$,onMousemove:le,onScroll:te},[e.renderSlot(u.$slots,"default",{},void 0,!0)],34)),e.unref(W)!=="vertical"?(e.openBlock(),e.createBlock(ne,{key:2,onMousedown:H[1]||(H[1]=e.withModifiers(R=>c(R,"horizontal"),["stop"])),active:g.value>S.value&&(B.value||b.value==="horizontal"),class:e.normalizeClass({"scrollbar-visible":g.value>S.value}),thumbOffset:N.value,thumbSize:L.value,mode:"horizontal"},null,8,["active","class","thumbOffset","thumbSize"])):e.createCommentVNode("",!0),e.unref(W)==="both-top"?(e.openBlock(),e.createBlock(ne,{key:3,onMousedown:H[2]||(H[2]=e.withModifiers(R=>c(R,"horizontal"),["stop"])),active:g.value>S.value&&(B.value||b.value==="horizontal"),class:e.normalizeClass({"scrollbar-visible":g.value>S.value}),thumbOffset:N.value,thumbSize:L.value,mode:"horizontal-top"},null,8,["active","class","thumbOffset","thumbSize"])):e.createCommentVNode("",!0),e.unref(W)!=="horizontal"?(e.openBlock(),e.createBlock(ne,{key:4,onMousedown:H[3]||(H[3]=e.withModifiers(R=>c(R,"vertical"),["stop"])),active:O.value>y.value&&(B.value||b.value==="vertical"),class:e.normalizeClass({"scrollbar-visible":O.value>y.value}),thumbOffset:J.value,thumbSize:V.value,mode:"vertical"},null,8,["active","class","thumbOffset","thumbSize"])):e.createCommentVNode("",!0)],2))}});const ve=se._export_sfc(be,[["__scopeId","data-v-21092b38"]]),ke=["onClick","onMousedown","data-column"],we=["onClick"],Be=["data-column"],ye={key:0,class:"cell column cell-additional-header row-number"},Se=["data-additionalHeader","data-column"],$e={key:0,class:"cell total top-total row-number"},Te=["data-column","data-subcolumn-index"],Me=["data-column"],ze=["onClick","data-column","data-subcolumn-index"],Ne=["data-column","data-primary-key"],Ee=["data-column","data-primary-key","data-subcolumn-index"],He=["innerHTML"],Re={key:0,class:"cell total row-number"},_e=["data-column","data-subcolumn-index"],Oe=["data-column"],Le=e.defineComponent({__name:"SimpleTable",props:{additionalHeaders:{default:()=>({})},cellClasses:{default:()=>({})},colorMetrics:{type:Boolean,default:!1},coloredMetrics:{default:()=>[]},columns:{},comparisonColumnKeys:{},detailsRows:{},dragColumns:{type:Boolean,default:!1},inversedKpis:{},noDataMessage:{default:"&nbsp;"},orderBy:{},orderColumnType:{},primaryColumn:{default:"id"},rows:{},showNoDataMessage:{type:Boolean,default:!1},showRowNumber:{type:Boolean,default:!0},showTotal:{type:Boolean,default:!0},showTopTotal:{type:Boolean,default:!1}},emits:["update:orderBy","addColoredMetric","removeColoredMetric","move:column"],setup(Q,{emit:D}){const Y=Q,{additionalHeaders:W,cellClasses:F,colorMetrics:U,coloredMetrics:_,columns:v,comparisonColumnKeys:i,detailsRows:B,dragColumns:y,inversedKpis:S,noDataMessage:O,orderBy:g,orderColumnType:b,primaryColumn:j,rows:q,showNoDataMessage:A,showRowNumber:M,showTotal:z,showTopTotal:k}=e.toRefs(Y),f=e.ref(),N=e.ref(),L=e.ref(0),V=e.ref(0),J=e.ref(0),$=e.ref({}),p=e.computed(()=>Object.entries(v.value).filter(([o,{visible:r}])=>r).map(([o,r])=>o)),X=e.computed(()=>p.value.length+(M.value?1:0)),P=e.computed(()=>L.value>3),Z=e.computed(()=>Object.values(q.value).reduce((o,r)=>{for(const[t,n]of Object.entries(v.value))if(n.type!=="string")if(i!=null&&i.value&&(n.colspan??0)>1){t in o||(o[t]=Object.entries(r[t]).reduce((a,[m,C])=>(a[m]=parseFloat(C),a),{}));for(const a in o[t])o[t][a]>r[t][a]&&(o[t][a]=parseFloat(r[t][a]))}else(!(t in o)||o[t]>r[t])&&(o[t]=parseFloat(r[t]));return o},{})),K=e.computed(()=>Object.values(q.value).reduce((o,r)=>{for(const[t,n]of Object.entries(v.value))if(n.type!=="string")if(i!=null&&i.value&&(n.colspan??0)>1){t in o||(o[t]=Object.entries(r[t]).reduce((a,[m,C])=>(a[m]=parseFloat(C),a),{}));for(const a in o[t])o[t][a]<r[t][a]&&(o[t][a]=parseFloat(r[t][a]))}else(!(t in o)||o[t]<r[t])&&(o[t]=parseFloat(r[t]));return o},{})),G=e.computed(()=>i!=null&&i.value?p.value.map(o=>v.value[o].rowspan??1).reduce((o,r)=>o>r?o:r):1),s=e.computed(()=>Object.values(q.value).sort((o,r)=>{const t=(()=>{const n=T(g.value[0].reduce((m,C)=>m[C],o),b.value),a=T(g.value[0].reduce((m,C)=>m[C],r),b.value);return n>a?1:n<a?-1:0})();return g.value[1]?-t:t}).reduce((o,r,t)=>(o.push({...r,rowInfo:{index:t,detailable:!0}}),B.value[r[j.value]]&&o.push(...Object.entries(B.value[r[j.value]]).map(([n,a])=>({...a,rowInfo:{index:t,subindex:+n,detailable:!1}}))),o),[])),c=e.computed(()=>{let o=0;for(const t of p.value){const n=v.value[t];n.colspan&&(i!=null&&i.value)?o+=n.colspan:o++}let r=`repeat(${o}, auto)`;return M.value&&(r=`min-content ${r}`),{"grid-template-columns":r}}),l=o=>$.value[o]?$.value[o].height:0,d=(o,r,t,n)=>{const a={...F.value,even:r%2===0};if(U.value){const m=(()=>!S||!S.value?"positive":S.value.includes(t)?"negative":"positive")();a[`color-intensity-${h(o[t],t,n)}`]=!0,a[`color-${m}`]=!0,n!==void 0&&i&&i.value&&i.value[n]==="difference"?a.colored=!1:a.colored=te(t)>=0}return a},h=(o,r,t)=>{if(v.value[r].type==="string")return;let n=o,a=K.value[r],m=Z.value[r];return i&&i.value&&t!==void 0&&(n=n[i.value[t]],a=a[i.value[t]],m=m[i.value[t]]),a===m?0:Math.round((n-m)*10/(a-m))},E=(o,r)=>{const t=v.value[o],n=[o];r!==void 0&&(i&&i.value?n.push(i.value[r]):n.push(r.toString()));const a=g.value[0]?g.value[0].every((m,C)=>m===n[C]):!1;return{"column-main-extended":r===void 0&&(t.rowspan??0)>1,dragged:f.value?p.value[f.value]===o:!1,"drag-mode":P.value,orderable:!(i&&i.value)||(t.colspan??1)===1||r!==void 0,"ordered-by":a,[`order-direction-${g.value[1]?"desc":"asc"}`]:a}},I=o=>{const r={};if($.value[o])if(f.value!==void 0&&p.value[f.value]===o){const{height:t,left:n,width:a}=$.value[o];r.left=`${Math.floor(n+J.value-V.value)}px`,r.height=`${t+1}px`,r.width=`${Math.round(a)}px`}else{const t=p.value.indexOf(o);let n=(()=>{if(f.value===void 0||N.value===void 0)return 0;if(f.value<t){if(N.value>=t)return-$.value[p.value[f.value]].width}else if(N.value<=t)return $.value[p.value[f.value]].width;return 0})();const{height:a,left:m,width:C}=$.value[o];r.left=`${Math.floor(m+n)}px`,r.height=`${a+1}px`,r.width=`${Math.floor(C)}px`}return r},x=o=>{const r=v.value[o],t={};return i&&i.value&&(r.colspan&&(t["grid-column-end"]=`span ${r.colspan}`),r.rowspan&&(t["grid-row-end"]=`span ${r.rowspan}`)),t},w=o=>i&&i.value?i.value[o]:void 0,T=(o,r)=>{switch(r){case"float":case"int":case"money":case"money_capped":case"percent":case"time":return parseFloat(o??0);case"date":return pe.DateTime.fromISO(o).toUnixInteger();default:return o}},ee=o=>o.subindex===void 0?o.index+1:`${o.index+1}.${o.subindex+1}`,te=o=>_.value.findIndex(r=>r===o),le=o=>U.value&&!["date","string"].includes(v.value[o].type),re=(o,r)=>{if(i&&i.value&&v.value[o].colspan&&r===void 0||f.value!==void 0&&P.value&&p.value[f.value]===o)return;const t=[o];r!==void 0&&(i&&i.value?t.push(i.value[r]):t.push(r.toString()));const n=t.every((m,C)=>m===g.value[0][C]),a=(()=>n?!g.value[1]:v.value[o].type!=="string")();D("update:orderBy",[t,a])},u=(o,r)=>{y.value&&(f.value=p.value.indexOf(o),N.value=f.value,L.value=0,V.value=r.clientX,J.value=r.clientX,window.addEventListener("mousemove",H),window.addEventListener("mouseup",R))},H=o=>{if(f.value===void 0)return;L.value++,J.value=o.clientX;const r=Object.entries(v.value).filter(([C,oe])=>oe.visible).map(([C])=>C).map((C,oe)=>({columnIndex:parseInt(oe.toString()),sizing:$.value[C]})),t=r[f.value].sizing,n=t.width/2,m=t.left+J.value-V.value;N.value=(()=>{for(const{columnIndex:C,sizing:oe}of r)if(m+n-oe.left-oe.width<0)return C;return r.length})()},R=o=>{if(f.value===void 0||N.value===void 0)return;P.value&&N.value!==f.value&&D("move:column",{from:f.value,to:N.value}),N.value=void 0,L.value=0,f.value=void 0,window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",R)},me=o=>{te(o)>=0?D("removeColoredMetric",o):D("addColoredMetric",o)},ae=e.ref({}),fe=(o,r)=>{r&&(ae.value[o]=r)},ue=e.ref(),ie=()=>{if(!ue.value)return;const o=ue.value.getBoundingClientRect();$.value=Object.entries(v.value).reduce((r,[t,n])=>{if(n.visible&&ae.value[t]){const a=ae.value[t].getBoundingClientRect();r[t]={height:a.height,left:a.left-o.left,width:a.width}}return r},{})},de=new ResizeObserver(()=>{ie()});return e.watch(ae,()=>{de.disconnect();for(const o of Object.values(ae.value))de.observe(o);ie()},{deep:!0,immediate:!0}),ie(),(o,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["table",{"with-secondary":!!e.unref(i)&&p.value.some(t=>(e.unref(v)[t].colspan||1)!==1)}]),ref_key:"table",ref:ue,style:e.normalizeStyle(c.value)},[e.unref(M)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"cell column column-main row-number",style:e.normalizeStyle(G.value>1?{"grid-row-end":`span ${G.value}`}:void 0)},[e.renderSlot(o.$slots,"columnRowNumber",{},()=>[e.createTextVNode("#")],!0)],4)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(v)[t].visible?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cell column column-main",E(t)]),ref_for:!0,ref:n=>fe(t,n),onClick:e.withModifiers(()=>re(t),["stop"]),onMousedown:n=>u(t,n),style:e.normalizeStyle(x(t)),"data-column":t},[e.renderSlot(o.$slots,"column",{columnKey:t,isGhost:!1},void 0,!0),le(t)?(e.openBlock(),e.createElementBlock("div",{key:0,class:"toggle-colored no-spacing",onClick:e.withModifiers(()=>me(t),["stop"]),style:e.normalizeStyle({top:`${l(t)}px`})},[e.renderSlot(o.$slots,"colorizeLabel",{enabled:te(t)>=0},void 0,!0)],12,we)):e.createCommentVNode("",!0)],46,ke)):e.createCommentVNode("",!0)],64))),256)),e.unref(y)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(v)[t].visible?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cell column column-main column-ghost",E(t)]),style:e.normalizeStyle(I(t)),"data-column":t},[e.renderSlot(o.$slots,"column",{columnKey:t,isGhost:!0},void 0,!0)],14,Be)):e.createCommentVNode("",!0)],64))),256)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(W),(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(M)?(e.openBlock(),e.createElementBlock("div",ye,[e.createVNode(he.Icon,{value:t.icon},null,8,["value"])])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,a=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cell column cell-additional-header",[`cell-additional-header-${a}`]]),"data-additionalHeader":n,"data-column":a},[e.renderSlot(o.$slots,"additionalHeader",{additionalHeader:n,columnKey:a},void 0,!0)],10,Se))),256))],64))),256)),e.unref(k)&&e.unref(z)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.unref(M)?(e.openBlock(),e.createElementBlock("div",$e,[e.renderSlot(o.$slots,"topTotalRowNumber",{},void 0,!0)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(v)[t].visible?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(i)&&(e.unref(v)[t].colspan||1)!==1?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(v)[t].colspan,n=>(e.openBlock(),e.createElementBlock("div",{class:"cell total top-total","data-column":t,"data-subcolumn-index":n-1},[e.renderSlot(o.$slots,"topTotal",{columnKey:t,subcolumnKey:w(n-1),values:s.value.map(a=>a[t])},void 0,!0)],8,Te))),256)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"cell total top-total","data-column":t},[e.renderSlot(o.$slots,"topTotal",{columnKey:t,values:s.value.map(n=>n[t])},void 0,!0)],8,Me))],64)):e.createCommentVNode("",!0)],64))),256))],64)):e.createCommentVNode("",!0),e.unref(i)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:3},e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(v)[t].visible&&e.unref(v)[t].colspan?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(v)[t].colspan,n=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cell column column-secondary",E(t,n-1)]),onClick:e.withModifiers(()=>re(t,n-1),["stop"]),"data-column":t,"data-subcolumn-index":n-1},[e.renderSlot(o.$slots,"secondaryColumn",{columnKey:t,subcolumnKey:w(n-1)},void 0,!0)],10,ze))),256)):e.createCommentVNode("",!0)],64))),256)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(M)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cell row-number",{even:n%2===0}])},[e.renderSlot(o.$slots,"rowNumber",{value:ee(t.rowInfo)},()=>[e.createTextVNode(e.toDisplayString(ee(t.rowInfo)),1)],!0)],2)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,a=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[!e.unref(i)||(e.unref(v)[a].colspan||1)===1?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cell",d(t,n,a)]),"data-column":a,"data-primary-key":t[e.unref(j)]},[e.renderSlot(o.$slots,`row-${a}`,{columnKey:a,index:n,row:t,subindex:t.rowInfo.subindex,value:t[a]},void 0,!0)],10,Ne)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(e.unref(v)[a].colspan,m=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["cell",d(t,n,a,m-1)]),"data-column":a,"data-primary-key":t[e.unref(j)],"data-subcolumn-index":m-1},[e.renderSlot(o.$slots,`row-${a}`,{columnKey:a,index:n,row:t,spanIndex:e.unref(i)?e.unref(i)[m-1]:m-1,subcolumnKey:w(m-1),subindex:t.rowInfo.subindex,value:t[a]?t[a][e.unref(i)?e.unref(i)[m-1]:m-1]:void 0},void 0,!0)],10,Ee))),256))],64))),256))],64))),256)),s.value.length===0&&e.unref(A)?(e.openBlock(),e.createElementBlock("div",{class:"cell odd no-data",key:"row-no-data",style:e.normalizeStyle({"grid-column":`1 / span ${X.value}`}),innerHTML:e.unref(O)},null,12,He)):e.createCommentVNode("",!0),e.unref(z)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:5},[e.unref(M)?(e.openBlock(),e.createElementBlock("div",Re,[e.renderSlot(o.$slots,"totalRowNumber",{},()=>[e.createTextVNode("#")],!0)])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.value,t=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(v)[t].visible?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(i)&&(e.unref(v)[t].colspan||1)!==1?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(v)[t].colspan,n=>(e.openBlock(),e.createElementBlock("div",{class:"cell total","data-column":t,"data-subcolumn-index":n-1},[e.renderSlot(o.$slots,"total",{columnKey:t,subcolumnKey:w(n-1),values:s.value.map(a=>a[t])},void 0,!0)],8,_e))),256)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"cell total","data-column":t},[e.renderSlot(o.$slots,"total",{columnKey:t,values:s.value.map(n=>n[t])},void 0,!0)],8,Oe))],64)):e.createCommentVNode("",!0)],64))),256))],64)):e.createCommentVNode("",!0)],6))}});const ce=se._export_sfc(Le,[["__scopeId","data-v-5387f3c9"]]),Fe=e.defineComponent({__name:"Table",props:{additionalHeaders:{default:()=>({})},cellClasses:{default:()=>({})},colorMetrics:{type:Boolean,default:!1},coloredMetrics:{default:()=>[]},columns:{},comparisonColumnKeys:{default:()=>[]},detailsRows:{},dragColumns:{type:Boolean,default:!1},fixedColumnNumber:{default:1},inversedKpis:{default:()=>[]},noDataMessage:{},orderBy:{},primaryColumn:{default:"id"},rows:{},scrollPosition:{default:()=>({left:0,top:0})},showRowNumber:{type:Boolean,default:!0},showTopTotal:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!0}},setup(Q){const D=Q,{additionalHeaders:Y,cellClasses:W,colorMetrics:F,coloredMetrics:U,columns:_,comparisonColumnKeys:v,detailsRows:i,dragColumns:B,fixedColumnNumber:y,inversedKpis:S,orderBy:O,primaryColumn:g,rows:b,scrollPosition:j,showRowNumber:q,showTopTotal:A,showTotal:M}=e.toRefs(D),z=e.ref(0),k=e.ref(),f=e.ref(0),N=e.ref(0);e.onUnmounted(()=>K.disconnect());const L=e.computed(()=>Object.keys(_.value).slice(0,y.value).reduce((s,c)=>(s[c]=_.value[c],s),{})),V=e.computed(()=>Object.keys(_.value).slice(y.value).reduce((s,c)=>(s[c]=_.value[c],s),{})),J=e.computed(()=>Object.keys(i.value).reduce((s,c)=>s+c.length,Object.values(b.value).length)),$=e.computed(()=>{var c,l,d;const s={};return(c=k.value)!=null&&c.main&&(s["--header-main-height"]=`${k.value.main}px`),(l=k.value)!=null&&l.secondary&&(s["--header-secondary-height"]=`${k.value.secondary}px`),z.value&&(s["--fixed-width"]=`${z.value}px`),(d=k.value)!=null&&d.total&&(s["--header-total-height"]=`${k.value.total}px`),f.value?(s["--total-height"]=`${f.value}px`,s["--bottom-height"]=s["--total-height"]):(J.value===1?s["--total-scrollbar-display"]="none":s["--total-height"]="20px",s["--bottom-height"]="0px"),s}),p=e.ref(),X=e.ref(),P=e.ref(!1),Z=()=>{if(P.value)return;P.value=!0,z.value=0,k.value=void 0,f.value=0;const s=c=>{const l={hasSecondary:!1,mainColumnHeight:0,secondaryColumnHeight:0,totalColumnHeight:0,totalHeight:0,width:0};if(!c)return l;const d=[...c.querySelectorAll(".cell.column-main:not(.column-main-extended)")],h=[...c.querySelectorAll(".cell.column-main.column-main-extended")],E=c.querySelector(".cell.column-secondary"),I=c.querySelector(".cell.total"),x=[];return d.length>0&&(l.mainColumnHeight=d[0].offsetHeight,l.width=d.reduce((w,{offsetWidth:T})=>w+T,0),x.push(l.mainColumnHeight)),E&&(l.hasSecondary=!0,l.secondaryColumnHeight=E.offsetHeight,x.push(l.secondaryColumnHeight)),h.length>0&&(l.width=h.reduce((w,{offsetWidth:T})=>w+T,0),d.length===0&&(l.mainColumnHeight=h[0].offsetHeight,x.push(l.mainColumnHeight))),l.totalColumnHeight=x.reduce((w,T)=>w+T+1,-1),I&&(l.totalHeight=I.offsetHeight),l};e.nextTick(()=>{var d,h;const c=s((d=p.value)==null?void 0:d.$el),l=s((h=X.value)==null?void 0:h.$el);if(l.hasSecondary)z.value=c.width,k.value={main:l.mainColumnHeight,secondary:l.secondaryColumnHeight,total:Math.max(c.totalColumnHeight,l.totalColumnHeight)},f.value=c.totalHeight;else{const E=Math.max(c.totalColumnHeight,l.totalColumnHeight);z.value=c.width,k.value={main:E,total:E},f.value=c.totalHeight}P.value=!1})},K=new ResizeObserver(()=>Z()),G=e.ref();return e.nextTick(()=>{K.disconnect(),G.value&&K.observe(G.value)}),e.watch(b,(s,c)=>{N.value=Math.random(),c.length||Z()}),e.watch(_,()=>{Z()}),(s,c)=>(e.openBlock(),e.createElementBlock("div",{class:"table-container",ref_key:"tableContainer",ref:G},[e.createVNode(ve,{"onUpdate:scrollPosition":c[7]||(c[7]=l=>s.$emit("update:scrollPosition",l)),scrollHeightDelta:(k.value?k.value.total:0)+f.value-40,scrollPosition:e.unref(j),scrollWidthDelta:z.value,style:e.normalizeStyle($.value),updateKey:N.value,mode:"both-top",optimized:""},{default:e.withCtx(()=>[e.createVNode(ce,{class:"fixed",ref_key:"fixedTable",ref:p,onAddColoredMetric:c[0]||(c[0]=l=>s.$emit("addColoredMetric",l)),onRemoveColoredMetric:c[1]||(c[1]=l=>s.$emit("removeColoredMetric",l)),"onUpdate:orderBy":c[2]||(c[2]=l=>s.$emit("update:orderBy",l)),additionalHeaders:e.unref(Y),cellClasses:e.unref(W),colorMetrics:e.unref(F),coloredMetrics:e.unref(U),columns:L.value,comparisonColumnKeys:e.unref(v),detailsRows:e.unref(i),dragColumns:!1,inversedKpis:e.unref(S),orderBy:e.unref(O),orderColumnType:e.unref(_)[e.unref(O)[0][0]].type,primaryColumn:e.unref(g),rows:e.unref(b),showNoDataMessage:!0,showRowNumber:e.unref(q),showTopTotal:e.unref(A),showTotal:e.unref(M)},e.createSlots({columnRowNumber:e.withCtx(()=>[e.renderSlot(s.$slots,"columnRowNumber",{},()=>[e.createTextVNode("#")],!0)]),colorizeLabel:e.withCtx(({enabled:l})=>[e.renderSlot(s.$slots,"colorizeLabel",{enabled:l},void 0,!0)]),column:e.withCtx(({columnKey:l,isGhost:d})=>[l in L.value?e.renderSlot(s.$slots,"column",{key:0,columnKey:l,isGhost:d},void 0,!0):e.createCommentVNode("",!0)]),additionalHeader:e.withCtx(({additionalHeader:l,columnKey:d})=>[e.renderSlot(s.$slots,"additionalHeader",{additionalHeader:l,columnKey:d},void 0,!0)]),topTotal:e.withCtx(({columnKey:l,subcolumnKey:d,values:h})=>[l in L.value?e.renderSlot(s.$slots,"topTotal",{key:0,columnKey:l,subcolumnKey:d,values:h},void 0,!0):e.createCommentVNode("",!0)]),topTotalRowNumber:e.withCtx(()=>[e.renderSlot(s.$slots,"topTotalRowNumber",{},void 0,!0)]),secondaryColumn:e.withCtx(({columnKey:l,subcolumnKey:d})=>[l in L.value?e.renderSlot(s.$slots,"secondaryColumn",{key:0,columnKey:l,subcolumnKey:d},void 0,!0):e.createCommentVNode("",!0)]),rowNumber:e.withCtx(({value:l})=>[e.renderSlot(s.$slots,"rowNumber",{value:l},void 0,!0)]),totalRowNumber:e.withCtx(()=>[e.renderSlot(s.$slots,"totalRowNumber",{},()=>[e.createTextVNode("#")],!0)]),total:e.withCtx(({columnKey:l,subcolumnKey:d,values:h})=>[l in L.value?e.renderSlot(s.$slots,"total",{key:0,columnKey:l,subcolumnKey:d,values:h},void 0,!0):e.createCommentVNode("",!0)]),_:2},[e.renderList(Object.keys(L.value),l=>({name:`row-${l}`,fn:e.withCtx(({columnKey:d,index:h,row:E,spanIndex:I,subcolumnKey:x,subindex:w,value:T})=>[e.renderSlot(s.$slots,"row-"+d,{columnKey:d,index:h,row:E,spanIndex:I,subcolumnKey:x,subindex:w,value:T},void 0,!0)])}))]),1032,["additionalHeaders","cellClasses","colorMetrics","coloredMetrics","columns","comparisonColumnKeys","detailsRows","inversedKpis","orderBy","orderColumnType","primaryColumn","rows","showRowNumber","showTopTotal","showTotal"]),e.createVNode(ce,{ref_key:"scrollableTable",ref:X,onAddColoredMetric:c[3]||(c[3]=l=>s.$emit("addColoredMetric",l)),"onMove:column":c[4]||(c[4]=({from:l,to:d})=>s.$emit("move:column",{from:l+e.unref(y),to:d+e.unref(y)})),onRemoveColoredMetric:c[5]||(c[5]=l=>s.$emit("removeColoredMetric",l)),"onUpdate:orderBy":c[6]||(c[6]=l=>s.$emit("update:orderBy",l)),additionalHeaders:e.unref(Y),cellClasses:e.unref(W),colorMetrics:e.unref(F),coloredMetrics:e.unref(U),columns:V.value,comparisonColumnKeys:e.unref(v),detailsRows:e.unref(i),inversedKpis:e.unref(S),dragColumns:e.unref(B),orderBy:e.unref(O),orderColumnType:e.unref(_)[e.unref(O)[0][0]].type,primaryColumn:e.unref(g),rows:e.unref(b),showRowNumber:!1,showTopTotal:e.unref(A),showTotal:e.unref(M),showNoDataMessage:!0,noDataMessage:s.noDataMessage,style:e.normalizeStyle($.value)},e.createSlots({colorizeLabel:e.withCtx(({enabled:l})=>[e.renderSlot(s.$slots,"colorizeLabel",{enabled:l},void 0,!0)]),column:e.withCtx(({columnKey:l,isGhost:d})=>[l in V.value?e.renderSlot(s.$slots,"column",{key:0,columnKey:l,isGhost:d},void 0,!0):e.createCommentVNode("",!0)]),additionalHeader:e.withCtx(({additionalHeader:l,columnKey:d})=>[e.renderSlot(s.$slots,"additionalHeader",{additionalHeader:l,columnKey:d},void 0,!0)]),topTotal:e.withCtx(({columnKey:l,subcolumnKey:d,values:h})=>[l in V.value?e.renderSlot(s.$slots,"topTotal",{key:0,columnKey:l,subcolumnKey:d,values:h},void 0,!0):e.createCommentVNode("",!0)]),secondaryColumn:e.withCtx(({columnKey:l,subcolumnKey:d})=>[l in V.value?e.renderSlot(s.$slots,"secondaryColumn",{key:0,columnKey:l,subcolumnKey:d},void 0,!0):e.createCommentVNode("",!0)]),total:e.withCtx(({columnKey:l,subcolumnKey:d,values:h})=>[l in V.value?e.renderSlot(s.$slots,"total",{key:0,columnKey:l,subcolumnKey:d,values:h},void 0,!0):e.createCommentVNode("",!0)]),_:2},[e.renderList(Object.keys(V.value),l=>({name:`row-${l}`,fn:e.withCtx(({columnKey:d,index:h,row:E,spanIndex:I,subcolumnKey:x,subindex:w,value:T})=>[e.renderSlot(s.$slots,"row-"+d,{columnKey:d,index:h,row:E,spanIndex:I,subcolumnKey:x,subindex:w,value:T},void 0,!0)])}))]),1032,["additionalHeaders","cellClasses","colorMetrics","coloredMetrics","columns","comparisonColumnKeys","detailsRows","inversedKpis","dragColumns","orderBy","orderColumnType","primaryColumn","rows","showTopTotal","showTotal","noDataMessage","style"])]),_:3},8,["scrollHeightDelta","scrollPosition","scrollWidthDelta","style","updateKey"])],512))}});const Ve=se._export_sfc(Fe,[["__scopeId","data-v-48f9d37b"]]);exports.Scrollable=ve;exports.ScrollableArea=ne;exports.SimpleTable=ce;exports.Table=Ve;
