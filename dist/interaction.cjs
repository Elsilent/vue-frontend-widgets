"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const M=require("./Input-05b931ff.cjs"),e=require("vue"),k=require("./datetime-a6d0f4bc.cjs"),y=require("./Icon-80a3c9ab.cjs"),G=require("./Grid-fc252a0d.cjs"),N=require("./Info-ad8c31fe.cjs"),u=require("./utils/date.cjs"),W=require("./match-5382edcf.cjs"),R=require("./_plugin-vue_export-helper-f246444f.cjs"),H=require("./Popover-5322298f.cjs"),J=require("./Link-d41039cc.cjs"),O=require("./utils/sort.cjs"),$=require("./Toast-8778b526.cjs");require("./utils/error.cjs");require("vue-router");const K=7*6,Q=e.defineComponent({__name:"Calendar",props:{minDate:{default:"2020-01-01"},mode:{},monthLabels:{},range:{},weekLabels:{},yearMonth:{}},emits:["update:range","update:yearMonth"],setup(C,{emit:f}){const B=C,c=k.DateTime.now(),p=c.year,{minDate:n,mode:w,monthLabels:d,range:v,weekLabels:g,yearMonth:h}=e.toRefs(B),V=e.computed(()=>k.DateTime.fromFormat(h.value,u.dateFormat.yearMonth).month-1),S=e.computed(()=>k.DateTime.fromFormat(h.value,u.dateFormat.yearMonth).year),x=e.computed(()=>d.value.reduce((o,s,i)=>(o[i]=s,o),{})),F=e.computed(()=>k.DateTime.fromFormat(v.value[1],u.dateFormat.yearMonthDay)),b=e.computed(()=>k.DateTime.fromFormat(v.value[0],u.dateFormat.yearMonthDay)),I=e.computed(()=>g!=null&&g.value?Array.apply(null,Array(7)).map((o,s)=>g.value[s]??""):void 0),D=e.computed(()=>{const o=k.DateTime.fromFormat(n.value,u.dateFormat.yearMonthDay).year;return new Array(p-o+1).fill(0).reduce((s,i,Y)=>{const z=o+Y;return s[z]=z.toString(),s},{})}),m=e.computed(()=>k.DateTime.fromFormat(h.value,u.dateFormat.yearMonth).startOf("month")),T=e.computed(()=>{const o=m.value.startOf("week");return m.value.hasSame(o,"day")?m.value.minus(k.Duration.fromObject({weeks:1})):o}),L=e.computed(()=>new Array(K).fill(0).map((o,s)=>T.value.plus({days:s}))),r=o=>o.hasSame(m.value,"month"),a=o=>({"in-range":o>=b.value&&o<=F.value,now:c.hasSame(o,"day"),"range-end":o.hasSame(F.value,"day"),"range-start":o.hasSame(b.value,"day"),"this-month":r(o)}),t=o=>c.hasSame(o,"day")?"important":r(o)&&o>=b.value&&o<=F.value?"accent":"neutral",l=e.computed(()=>m.value.endOf("month")<c),_=e.computed(()=>k.DateTime.fromFormat(n.value,u.dateFormat.yearMonthDay).startOf("month")<m.value),P=()=>{const o=m.value.month;A(o<12?o:0,o<12?void 0:m.value.year+1)},j=()=>{const o=m.value.month-2;A(o>=0?o:11,o>=0?void 0:m.value.year-1)},A=(o,s)=>{const i=m.value.set({year:s,month:parseInt(o)+1}).toFormat(u.dateFormat.yearMonth);f("update:yearMonth",i)},E=o=>{const s=W.match(w.value).when("end",()=>[v.value[0],o.toFormat(u.dateFormat.yearMonthDay)]).when("start",()=>[o.toFormat(u.dateFormat.yearMonthDay),v.value[1]]).done;f("update:range",u.normalizeRange(s))},U=o=>{const s=m.value.set({year:parseInt(o)}).toFormat(u.dateFormat.yearMonth);f("update:yearMonth",s)};return(o,s)=>(e.openBlock(),e.createBlock(y.Align,{class:"calendar",column:""},{default:e.withCtx(()=>[e.createVNode(y.Align,{class:"header"},{default:e.withCtx(()=>[e.createVNode(M.Button,{class:"month-picker",onClick:s[0]||(s[0]=e.withModifiers(()=>j(),["stop"])),disabled:!_.value,icon:"chevron-left",mood:"neutral",outline:"",size:"large-4"},null,8,["disabled"]),e.createVNode(M.Dropdown,{class:"flex-max spacing-small","onUpdate:modelValue":s[1]||(s[1]=i=>A(i)),items:x.value,modelValue:V.value,size:"small"},null,8,["items","modelValue"]),e.createVNode(M.Dropdown,{class:"spacing-small","onUpdate:modelValue":s[2]||(s[2]=i=>U(i)),items:D.value,modelValue:S.value,size:"small"},null,8,["items","modelValue"]),e.createVNode(M.Button,{class:"month-picker spacing-small",onClick:s[3]||(s[3]=e.withModifiers(()=>P(),["stop"])),disabled:!l.value,icon:"chevron-right",mood:"neutral",outline:"",size:"large-4"},null,8,["disabled"])]),_:1}),e.createVNode(y.Align,{class:"calendar-grid-container flex-max",horizontal:"center",vertical:"center"},{default:e.withCtx(()=>[e.createVNode(G.Grid,{class:"calendar-grid no-spacing",columns:7},{default:e.withCtx(()=>[I.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(I.value,i=>(e.openBlock(),e.createBlock(N.Info,{class:"week-label",important:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(i),1)]),_:2},1024))),256)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(L.value,i=>(e.openBlock(),e.createBlock(M.Button,{class:e.normalizeClass(["day",a(i)]),onClick:e.withModifiers(()=>E(i),["stop"]),disabled:i>e.unref(c),label:i.day.toString(),mood:t(i),outline:t(i)==="neutral"},null,8,["onClick","class","disabled","label","mood","outline"]))),256))]),_:1})]),_:1})]),_:1}))}});const q=R._export_sfc(Q,[["__scopeId","data-v-e0ea2f05"]]),X=e.defineComponent({__name:"DateRangePicker",props:{dateRangePresets:{},disabled:{type:Boolean,default:!1},modelValue:{},monthLabels:{},translator:{},weekLabels:{}},emits:["update:modelValue"],setup(C,{emit:f}){const B=C,{dateRangePresets:c,disabled:p,modelValue:n}=e.toRefs(B),w=e.ref(!1),d=e.ref(),v=e.ref(),g=a=>{const t=k.DateTime.fromFormat(a[0],u.dateFormat.yearMonthDay),l=k.DateTime.fromFormat(a[1],u.dateFormat.yearMonthDay),_=t.toFormat(u.dateFormat.yearMonth),P=t.hasSame(l,"month")&&l.endOf("month")<k.DateTime.now()?l.plus({month:1}).toFormat(u.dateFormat.yearMonth):l.toFormat(u.dateFormat.yearMonth);return[_,P]},h=()=>u.rangeToDisplayFormat(n.value),V=e.ref(h()),S=a=>{const t=g(a);L.value=t[0],r.value=t[1]},x=()=>{var a;w.value||p.value||(w.value=!0,S(n.value),(a=v.value)==null||a.$el.focus())},F=a=>{const[t,l]=u.rangeFromPreset(a);return t===n.value[0]&&l===n.value[1]},b=e.ref("start"),I=a=>{f("update:modelValue",a),b.value==="start"?b.value="end":D()};e.watch(n,()=>{V.value=h()});const D=a=>{var t,l,_;if(!a||!((t=d.value)!=null&&t.$el.contains(a.relatedTarget))){w.value=!1,b.value="start",(l=v.value)==null||l.$el.blur();return}(_=v.value)==null||_.$el.focus()},m=a=>{const t=u.rangeFromPreset(c.value[a]);f("update:modelValue",t),S(t),D()},T=g(n.value),L=e.ref(T[0]),r=e.ref(T[1]);return e.watch(V,a=>{const t=u.tryRangeFromDisplayFormat(a);t&&f("update:modelValue",t)}),(a,t)=>(e.openBlock(),e.createBlock(y.Align,{class:"date-range-picker",onClick:t[6]||(t[6]=()=>x()),ref_key:"dateRangePicker",ref:d,tabindex:"-1"},{default:e.withCtx(()=>[e.createVNode(M.Input,{ref_key:"dateRangePickerInput",ref:v,modelValue:V.value,"onUpdate:modelValue":t[0]||(t[0]=l=>V.value=l),onBlur:t[1]||(t[1]=l=>D(l)),disabled:e.unref(p)},null,8,["modelValue","disabled"]),e.createVNode(M.Button,{class:"no-spacing",disabled:e.unref(p),icon:"calendar",mood:"inactive"},null,8,["disabled"]),e.createVNode(H.Popover,{class:"date-range-picker-body no-spacing",visible:w.value},{default:e.withCtx(()=>[e.createVNode(y.Align,{class:"sections"},{default:e.withCtx(()=>[e.createVNode(y.Align,{class:"presets",column:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(l,_)=>(e.openBlock(),e.createBlock(N.Info,{class:e.normalizeClass(["preset",{active:F(l)}]),onClick:e.withModifiers(()=>m(_),["stop"]),size:"small"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.translator(l.label)),1)]),_:2},1032,["onClick","class"]))),256))]),_:1}),e.createVNode(y.Align,{class:"calendars"},{default:e.withCtx(()=>[e.createVNode(q,{"onUpdate:range":t[2]||(t[2]=l=>I(l)),yearMonth:L.value,"onUpdate:yearMonth":t[3]||(t[3]=l=>L.value=l),mode:b.value,monthLabels:a.monthLabels,range:e.unref(n),weekLabels:a.weekLabels},null,8,["yearMonth","mode","monthLabels","range","weekLabels"]),e.createVNode(q,{"onUpdate:range":t[4]||(t[4]=l=>I(l)),yearMonth:r.value,"onUpdate:yearMonth":t[5]||(t[5]=l=>r.value=l),mode:b.value,monthLabels:a.monthLabels,range:e.unref(n),weekLabels:a.weekLabels},null,8,["yearMonth","mode","monthLabels","range","weekLabels"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1},512))}});const Z=R._export_sfc(X,[["__scopeId","data-v-47304ce0"]]),ee=["disabled"],te=e.defineComponent({__name:"MultiSelect",props:{allItemsLabel:{},disabled:{type:Boolean,default:!1},items:{},modelValue:{},noInline:{type:Boolean,default:!1},showAllItemsItem:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(C,{emit:f}){const B=C,{disabled:c,items:p,modelValue:n,showAllItemsItem:w}=e.toRefs(B),d=e.ref(!1),v=e.ref(null),g=e.ref(null),h=e.ref(""),V=e.computed(()=>!n||!n.value?!1:Object.keys(p.value).every(r=>n.value.includes(r))),S=e.computed(()=>Object.values(p.value).sort(O.sort).join(", ")),x=e.computed(()=>(h.value?Object.entries(p.value).filter(([,a])=>a.toLowerCase().includes(h.value.toLowerCase())).map(([a])=>a):Object.keys(p.value)).sort(O.sort).reduce((a,t)=>(a[t]=p.value[t],a),{})),F=e.computed(()=>!(n!=null&&n.value)||n.value===void 0?1:-Object.keys(x.value).indexOf(n.value.toString())),b=e.computed(()=>!n||!n.value?[]:[...n.value].sort(O.sort)),I=e.computed(()=>{let r=Object.keys(x.value).length;return w.value&&r++,{"--item-count":r,"--selection-offset":F.value}}),D=()=>{var r;c.value||(d.value=!0,(r=g.value)==null||r.focus())},m=r=>{var a,t,l;if(!((a=v.value)!=null&&a.$el.contains(r.relatedTarget))){d.value=!1,h.value="",(t=g.value)==null||t.blur();return}(l=g.value)==null||l.focus()},T=r=>{if(!(n!=null&&n.value)||c!=null&&c.value||!d.value)return;const a=[...n.value],t=a.indexOf(r);t>=0?a.splice(t,1):a.push(r),f("update:modelValue",a)},L=r=>{f("update:modelValue",r)};return(r,a)=>(e.openBlock(),e.createBlock(y.Align,{class:"multiselect-container",ref_key:"multiSelectContainer",ref:v,inline:!r.noInline,column:""},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["multiselect",{active:d.value,disabled:e.unref(c)}]),onClick:a[3]||(a[3]=()=>D()),style:e.normalizeStyle(I.value),tabindex:"-1"},[e.createVNode(y.Align,{class:"current-item",vertical:"center"},{default:e.withCtx(()=>[!e.unref(n)||e.unref(n).length===0?(e.openBlock(),e.createBlock(N.Info,{key:0,class:"default-value"},{default:e.withCtx(()=>[e.createTextVNode("Â ")]),_:1})):(e.openBlock(),e.createBlock(y.Align,{key:1,class:"current-values",wrap:""},{default:e.withCtx(()=>[V.value&&r.allItemsLabel?(e.openBlock(),e.createBlock(N.Info,{key:0,class:"current-value all-items",title:S.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.allItemsLabel),1)]),_:1},8,["title"])):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(b.value,t=>(e.openBlock(),e.createBlock(N.Info,{class:"current-value no-spacing",onClick:e.withModifiers(()=>T(t),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(p)[t]),1)]),_:2},1032,["onClick"]))),256))]),_:1})),e.withDirectives(e.createElementVNode("input",{class:"flex-max new-value-input no-spacing",ref_key:"newValueInput",ref:g,"onUpdate:modelValue":a[0]||(a[0]=t=>h.value=t),onBlur:a[1]||(a[1]=t=>m(t)),disabled:e.unref(c)},null,40,ee),[[e.vModelText,h.value]]),e.createVNode(y.Icon,{backend:"boxicons-solid",size:"small-2",value:"down-arrow"})]),_:1}),e.createVNode(y.Align,{class:"dropdown-menu no-spacing",column:""},{default:e.withCtx(()=>[e.unref(w)?(e.openBlock(),e.createBlock(N.Info,{key:0,class:e.normalizeClass(["item",{current:V.value}]),onClick:a[2]||(a[2]=e.withModifiers(()=>L(Object.keys(e.unref(p))),["stop"]))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(r.allItemsLabel),1)]),_:1},8,["class"])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,(t,l)=>{var _;return e.openBlock(),e.createBlock(N.Info,{class:e.normalizeClass(["item no-spacing",{current:(_=e.unref(n))==null?void 0:_.includes(l)}]),onClick:e.withModifiers(P=>T(l),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t),1)]),_:2},1032,["onClick","class"])}),256))]),_:1})],6)]),_:1},8,["inline"]))}});const ae=R._export_sfc(te,[["__scopeId","data-v-6eb63abe"]]),oe=e.defineComponent({__name:"Toggle",props:{mood:{default:"positive"},modelValue:{type:Boolean}},emits:["checked","unchecked","update:modelValue"],setup(C,{emit:f}){const B=C,{modelValue:c,mood:p}=e.toRefs(B),n=e.computed(()=>{const d=c.value?p.value:"inactive";return{active:c.value,[`mood-background-${d}`]:!0,[`mood-border-${d}`]:!0}}),w=()=>{const d=!c.value;f(d?"checked":"unchecked"),f("update:modelValue",d)};return(d,v)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["toggle",n.value]),onClick:v[0]||(v[0]=()=>w())},null,2))}});const ne=R._export_sfc(oe,[["__scopeId","data-v-49b20089"]]);exports.Button=M.Button;exports.Dropdown=M.Dropdown;exports.Input=M.Input;exports.Link=J.Link;exports.PopoverMenu=$.PopoverMenu;exports.Toast=$.Toast;exports.Calendar=q;exports.DateRangePicker=Z;exports.MultiSelect=ae;exports.Toggle=ne;
