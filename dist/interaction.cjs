"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const _=require("./Input-736927bd.cjs"),e=require("vue"),b=require("./datetime-a6d0f4bc.cjs"),V=require("./Icon-80a3c9ab.cjs"),Y=require("./Grid-fc252a0d.cjs"),B=require("./Info-ad8c31fe.cjs"),i=require("./utils/date.cjs"),G=require("./match-5382edcf.cjs"),j=require("./_plugin-vue_export-helper-f246444f.cjs"),W=require("./Popover-5322298f.cjs"),H=require("./Link-322e5eb2.cjs"),E=require("./utils/sort.cjs"),X=require("./BodyPopover-7a2603c3.cjs"),K=require("./Toast-4d99fc03.cjs");require("./utils/error.cjs");require("vue-router");const J=7*6,Q=e.defineComponent({__name:"Calendar",props:{minDate:{default:"2020-01-01"},mode:{},monthLabels:{},range:{},weekLabels:{},yearMonth:{}},emits:["update:range","update:yearMonth"],setup($,{emit:f}){const I=$,c=b.DateTime.now(),d=c.year,{minDate:r,mode:y,monthLabels:g,range:m,weekLabels:k,yearMonth:h}=e.toRefs(I),w=e.computed(()=>b.DateTime.fromFormat(h.value,i.dateFormat.yearMonth).month-1),D=e.computed(()=>b.DateTime.fromFormat(h.value,i.dateFormat.yearMonth).year),P=e.computed(()=>g.value.reduce((t,l,p)=>(t[p]=l,t),{})),F=e.computed(()=>b.DateTime.fromFormat(m.value[1],i.dateFormat.yearMonthDay)),C=e.computed(()=>b.DateTime.fromFormat(m.value[0],i.dateFormat.yearMonthDay)),M=e.computed(()=>k!=null&&k.value?Array.apply(null,Array(7)).map((t,l)=>k.value[l]??""):void 0),x=e.computed(()=>{const t=b.DateTime.fromFormat(r.value,i.dateFormat.yearMonthDay).year;return new Array(d-t+1).fill(0).reduce((l,p,q)=>{const z=t+q;return l[z]=z.toString(),l},{})}),v=e.computed(()=>b.DateTime.fromFormat(h.value,i.dateFormat.yearMonth).startOf("month")),R=e.computed(()=>{const t=v.value.startOf("week");return v.value.hasSame(t,"day")?v.value.minus(b.Duration.fromObject({weeks:1})):t}),S=e.computed(()=>new Array(J).fill(0).map((t,l)=>R.value.plus({days:l}))),L=t=>t.hasSame(v.value,"month"),n=t=>({"in-range":t>=C.value&&t<=F.value,now:c.hasSame(t,"day"),"range-end":t.hasSame(F.value,"day"),"range-start":t.hasSame(C.value,"day"),"this-month":L(t)}),o=t=>c.hasSame(t,"day")?"important":L(t)&&t>=C.value&&t<=F.value?"accent":"neutral",s=e.computed(()=>v.value.endOf("month")<c),T=e.computed(()=>b.DateTime.fromFormat(r.value,i.dateFormat.yearMonthDay).startOf("month")<v.value),N=()=>{const t=v.value.month;O(t<12?t:0,t<12?void 0:v.value.year+1)},A=()=>{const t=v.value.month-2;O(t>=0?t:11,t>=0?void 0:v.value.year-1)},O=(t,l)=>{const p=v.value.set({year:l,month:parseInt(t)+1}).toFormat(i.dateFormat.yearMonth);f("update:yearMonth",p)},u=t=>{const l=G.match(y.value).when("end",()=>[m.value[0],t.toFormat(i.dateFormat.yearMonthDay)]).when("start",()=>[t.toFormat(i.dateFormat.yearMonthDay),m.value[1]]).done;f("update:range",i.normalizeRange(l))},a=t=>{const l=v.value.set({year:parseInt(t)}).toFormat(i.dateFormat.yearMonth);f("update:yearMonth",l)};return(t,l)=>(e.openBlock(),e.createBlock(V.Align,{class:"calendar",column:""},{default:e.withCtx(()=>[e.createVNode(V.Align,{class:"header"},{default:e.withCtx(()=>[e.createVNode(_.Button,{class:"month-picker",onClick:l[0]||(l[0]=e.withModifiers(()=>A(),["stop"])),disabled:!T.value,tabindex:-1,icon:"chevron-left",mood:"neutral",outline:"",size:"large-4"},null,8,["disabled"]),e.createVNode(_.Dropdown,{class:"flex-max spacing-small","onUpdate:modelValue":l[1]||(l[1]=p=>O(p)),items:P.value,modelValue:w.value,tabindex:-1,size:"small"},null,8,["items","modelValue"]),e.createVNode(_.Dropdown,{class:"spacing-small","onUpdate:modelValue":l[2]||(l[2]=p=>a(p)),items:x.value,modelValue:D.value,tabindex:-1,size:"small"},null,8,["items","modelValue"]),e.createVNode(_.Button,{class:"month-picker spacing-small",onClick:l[3]||(l[3]=e.withModifiers(()=>N(),["stop"])),disabled:!s.value,tabindex:-1,icon:"chevron-right",mood:"neutral",outline:"",size:"large-4"},null,8,["disabled"])]),_:1}),e.createVNode(V.Align,{class:"calendar-grid-container flex-max",horizontal:"center",vertical:"center"},{default:e.withCtx(()=>[e.createVNode(Y.Grid,{class:"calendar-grid no-spacing",columns:7},{default:e.withCtx(()=>[M.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(M.value,p=>(e.openBlock(),e.createBlock(B.Info,{class:"week-label",important:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p),1)]),_:2},1024))),256)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.value,p=>(e.openBlock(),e.createBlock(_.Button,{class:e.normalizeClass(["day",n(p)]),onClick:e.withModifiers(()=>u(p),["stop"]),disabled:p>e.unref(c),label:p.day.toString(),mood:o(p),outline:o(p)==="neutral",tabindex:"-1"},null,8,["onClick","class","disabled","label","mood","outline"]))),256))]),_:1})]),_:1})]),_:1}))}});const U=j._export_sfc(Q,[["__scopeId","data-v-8d6b8d9a"]]),Z=e.defineComponent({__name:"DateRangePicker",props:{dateRangePresets:{},disabled:{type:Boolean,default:!1},modelValue:{},monthLabels:{},translator:{},weekLabels:{}},emits:["update:modelValue"],setup($,{emit:f}){const I=$,{dateRangePresets:c,disabled:d,modelValue:r}=e.toRefs(I),y=e.ref(!1),g=e.ref(),m=e.ref(),k=n=>{const o=b.DateTime.fromFormat(n[0],i.dateFormat.yearMonthDay),s=b.DateTime.fromFormat(n[1],i.dateFormat.yearMonthDay),T=o.toFormat(i.dateFormat.yearMonth),N=o.hasSame(s,"month")&&s.endOf("month")<b.DateTime.now()?s.plus({month:1}).toFormat(i.dateFormat.yearMonth):s.toFormat(i.dateFormat.yearMonth);return[T,N]},h=()=>i.rangeToDisplayFormat(r.value),w=e.ref(h()),D=n=>{const o=k(n);S.value=o[0],L.value=o[1]},P=()=>{var n;y.value||d.value||(y.value=!0,D(r.value),(n=m.value)==null||n.$el.focus())},F=n=>{const[o,s]=i.rangeFromPreset(n);return o===r.value[0]&&s===r.value[1]},C=e.ref("start"),M=n=>{f("update:modelValue",n),C.value==="start"?C.value="end":x()};e.watch(r,()=>{w.value=h()});const x=n=>{var o,s,T;if(!n||!((o=g.value)!=null&&o.$el.contains(n.relatedTarget))){y.value=!1,C.value="start",(s=m.value)==null||s.$el.blur();return}(T=m.value)==null||T.$el.focus()},v=n=>{const o=i.rangeFromPreset(c.value[n]);f("update:modelValue",o),D(o),x()},R=k(r.value),S=e.ref(R[0]),L=e.ref(R[1]);return e.watch(w,n=>{const o=i.tryRangeFromDisplayFormat(n);o&&f("update:modelValue",o)}),(n,o)=>(e.openBlock(),e.createBlock(V.Align,{class:"date-range-picker",onClick:o[7]||(o[7]=s=>P()),ref_key:"dateRangePicker",ref:g,tabindex:"-1"},{default:e.withCtx(()=>[e.createVNode(_.Input,{ref_key:"dateRangePickerInput",ref:m,modelValue:w.value,"onUpdate:modelValue":o[0]||(o[0]=s=>w.value=s),onFocus:o[1]||(o[1]=s=>P()),onBlur:o[2]||(o[2]=s=>x(s)),disabled:e.unref(d)},null,8,["modelValue","disabled"]),e.createVNode(_.Button,{class:"no-spacing",disabled:e.unref(d),icon:"calendar",mood:"inactive",tabindex:"-1"},null,8,["disabled"]),e.createVNode(W.Popover,{class:"date-range-picker-body no-spacing",visible:y.value},{default:e.withCtx(()=>[e.createVNode(V.Align,{class:"sections"},{default:e.withCtx(()=>[e.createVNode(V.Align,{class:"presets",column:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(s,T)=>(e.openBlock(),e.createBlock(B.Info,{class:e.normalizeClass(["preset",{active:F(s)}]),onClick:e.withModifiers(()=>v(T),["stop"]),size:"small"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.translator(s.label)),1)]),_:2},1032,["onClick","class"]))),256))]),_:1}),e.createVNode(V.Align,{class:"calendars"},{default:e.withCtx(()=>[e.createVNode(U,{"onUpdate:range":o[3]||(o[3]=s=>M(s)),yearMonth:S.value,"onUpdate:yearMonth":o[4]||(o[4]=s=>S.value=s),mode:C.value,monthLabels:n.monthLabels,range:e.unref(r),weekLabels:n.weekLabels},null,8,["yearMonth","mode","monthLabels","range","weekLabels"]),e.createVNode(U,{"onUpdate:range":o[5]||(o[5]=s=>M(s)),yearMonth:L.value,"onUpdate:yearMonth":o[6]||(o[6]=s=>L.value=s),mode:C.value,monthLabels:n.monthLabels,range:e.unref(r),weekLabels:n.weekLabels},null,8,["yearMonth","mode","monthLabels","range","weekLabels"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1},512))}});const ee=j._export_sfc(Z,[["__scopeId","data-v-cd797576"]]),te=["disabled"],ae=e.defineComponent({__name:"MultiSelect",props:{allItemsLabel:{},disabled:{type:Boolean,default:!1},items:{},modelValue:{},noInline:{type:Boolean,default:!1},showAllItemsItem:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!1},collapseTagsLabel:{default:""},collapseTagsTooltip:{type:Boolean,default:!1}},emits:["update:modelValue"],setup($,{emit:f}){const I=$,{disabled:c,items:d,modelValue:r,showAllItemsItem:y,collapseTags:g}=e.toRefs(I),m=e.ref(!1),k=e.ref(null),h=e.ref(null),w=e.ref(""),D=e.ref(!1),P=e.ref(),F=e.computed(()=>!r||!r.value?!1:Object.keys(d.value).every(u=>r.value.includes(u))),C=e.computed(()=>Object.values(d.value).sort(E.sort).join(", ")),M=e.computed(()=>(S(),(w.value?Object.entries(d.value).filter(([,a])=>a.toLowerCase().includes(w.value.toLowerCase())).map(([a])=>a):Object.keys(d.value)).sort(E.sort).reduce((a,t)=>(a[t]=d.value[t],a),{}))),{selectedItem:x,onKeypressDown:v,onKeypressUp:R,clearSelectedItem:S}=_.useUpDownKeys({length:e.computed(()=>Object.keys(M.value).length)}),L=e.computed(()=>r!=null&&r.value?-Object.keys(M.value).indexOf(r.value.toString()):1),n=e.computed(()=>!r||!r.value?[]:[...r.value].sort(E.sort)),o=e.computed(()=>{let u=Object.keys(M.value).length;return y.value&&u++,{"--item-count":u,"--selection-offset":L.value}}),s=()=>{var u;c.value||(m.value=!0,D.value=!1,(u=h.value)==null||u.focus())},T=u=>{var a,t;(a=k.value)!=null&&a.$el.contains(u.relatedTarget)||(m.value=!1,w.value="",(t=h.value)==null||t.blur(),S())},N=u=>{var l;if(!(r!=null&&r.value)||c!=null&&c.value||!m.value)return;if(!u){A(Object.keys(d.value));return}const a=F.value?[]:[...r.value],t=a.indexOf(u);t>=0?a.splice(t,1):a.push(u),f("update:modelValue",a),(l=h.value)==null||l.focus({preventScroll:!0})},A=u=>{var a;f("update:modelValue",u),(a=h.value)==null||a.focus({preventScroll:!0})},O=e.computed(()=>{let u=d.value[n.value[1]];for(let a=2;a<n.value.length;a++)u+=", "+d.value[n.value[a]];return u});return(u,a)=>(e.openBlock(),e.createBlock(V.Align,{class:"multiselect-container",ref_key:"multiSelectContainer",ref:k,inline:!u.noInline,column:""},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["multiselect",{active:m.value,disabled:e.unref(c)}]),onClick:a[9]||(a[9]=t=>s()),style:e.normalizeStyle(o.value),tabindex:"-1",onKeydown:[a[10]||(a[10]=e.withKeys(e.withModifiers(t=>e.unref(v)(),["prevent"]),["down"])),a[11]||(a[11]=e.withKeys(e.withModifiers(t=>e.unref(R)(),["prevent"]),["up"])),a[12]||(a[12]=e.withKeys(e.withModifiers(t=>N(Object.keys(M.value)[e.unref(x)-1]),["prevent"]),["enter"]))]},[e.createVNode(V.Align,{class:"current-item",vertical:"center"},{default:e.withCtx(()=>[!e.unref(r)||e.unref(r).length===0?(e.openBlock(),e.createBlock(B.Info,{key:0,class:"default-value"},{default:e.withCtx(()=>[e.createTextVNode(" ")]),_:1})):(e.openBlock(),e.createBlock(V.Align,{key:1,class:"current-values",wrap:!e.unref(g)},{default:e.withCtx(()=>{var t;return[F.value&&u.allItemsLabel?(e.openBlock(),e.createBlock(B.Info,{key:0,class:"current-value all-items",title:C.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.allItemsLabel),1)]),_:1},8,["title"])):e.unref(g)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(B.Info,{class:"current-value no-spacing cuttable",onClick:a[0]||(a[0]=()=>N(n.value[0]))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(d)[n.value[0]]),1)]),_:1}),n.value.length===2?(e.openBlock(),e.createBlock(B.Info,{key:0,class:"current-value no-spacing cuttable",onClick:a[1]||(a[1]=()=>N(n.value[1]))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(d)[n.value[1]]),1)]),_:1})):n.value.length>2?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(B.Info,{class:"current-value no-spacing",ref_key:"collapseTagRef",ref:P,onMouseover:a[2]||(a[2]=l=>D.value=!m.value),onMouseleave:a[3]||(a[3]=l=>D.value=!1)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.collapseTagsLabel),1)]),_:1},512),u.collapseTagsTooltip?(e.openBlock(),e.createBlock(X.BodyPopover,{key:0,visible:D.value,autoPosition:"",parentNode:(t=P.value)==null?void 0:t.$el,popoverClass:"collapse-tooltip",placementY:"top",placementX:"left"},{default:e.withCtx(()=>[e.createVNode(B.Info,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(O.value),1)]),_:1})]),_:1},8,["visible","parentNode"])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],64)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(n.value,l=>(e.openBlock(),e.createBlock(B.Info,{class:"current-value no-spacing",onClick:e.withModifiers(()=>N(l),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(d)[l]),1)]),_:2},1032,["onClick"]))),256))]}),_:1},8,["wrap"])),e.withDirectives(e.createElementVNode("input",{class:"flex-max new-value-input no-spacing",ref_key:"newValueInput",ref:h,"onUpdate:modelValue":a[4]||(a[4]=t=>w.value=t),onBlur:a[5]||(a[5]=t=>T(t)),onFocus:a[6]||(a[6]=t=>s()),disabled:e.unref(c)},null,40,te),[[e.vModelText,w.value]]),e.createVNode(V.Icon,{backend:"boxicons-solid",size:"small-2",value:"down-arrow"})]),_:1}),e.createVNode(V.Align,{class:"dropdown-menu no-spacing",column:""},{default:e.withCtx(()=>[e.unref(y)?(e.openBlock(),e.createBlock(B.Info,{key:0,class:e.normalizeClass(["item",{current:F.value,selected:e.unref(x)===0}]),onClick:a[7]||(a[7]=e.withModifiers(t=>A(Object.keys(e.unref(d))),["stop"])),onMouseover:a[8]||(a[8]=t=>x.value=0)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.allItemsLabel),1)]),_:1},8,["class"])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(M.value,(t,l,p)=>{var q;return e.openBlock(),e.createBlock(B.Info,{class:e.normalizeClass(["item no-spacing",{current:((q=e.unref(r))==null?void 0:q.includes(l))&&!F.value,selected:e.unref(x)-1===p}]),onClick:e.withModifiers(z=>N(l),["stop"]),onMouseover:z=>x.value=p+1},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t),1)]),_:2},1032,["onClick","class","onMouseover"])}),256))]),_:1})],38)]),_:1},8,["inline"]))}});const oe=j._export_sfc(ae,[["__scopeId","data-v-c524578a"]]),ne=["id","value"],le=["for"],re=e.defineComponent({__name:"Toggle",props:{mood:{default:"positive"},modelValue:{type:Boolean},id:{}},emits:["checked","unchecked","update:modelValue"],setup($,{emit:f}){const I=$,{modelValue:c,mood:d}=e.toRefs(I),r=e.computed(()=>{const g=c.value?d.value:"inactive";return{active:c.value,[`mood-background-${g}`]:!0,[`mood-border-${g}`]:!0}}),y=()=>{const g=!c.value;f(g?"checked":"unchecked"),f("update:modelValue",g)};return(g,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("input",{class:"toggle-input",type:"checkbox",id:I.id,value:e.unref(c),onChange:m[0]||(m[0]=k=>y()),onKeyup:m[1]||(m[1]=e.withKeys(k=>y(),["enter"]))},null,40,ne),e.createElementVNode("label",{class:e.normalizeClass(["toggle",r.value]),for:I.id},null,10,le)],64))}});const se=j._export_sfc(re,[["__scopeId","data-v-8aa21e20"]]);exports.Button=_.Button;exports.Dropdown=_.Dropdown;exports.Input=_.Input;exports.Link=H.Link;exports.PopoverMenu=K.PopoverMenu;exports.Toast=K.Toast;exports.Calendar=U;exports.DateRangePicker=ee;exports.MultiSelect=oe;exports.Toggle=se;
