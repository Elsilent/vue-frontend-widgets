"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const _=require("./Input-38d6a35c.cjs"),e=require("vue"),B=require("./datetime-a6d0f4bc.cjs"),w=require("./Icon-80a3c9ab.cjs"),Y=require("./Grid-fc252a0d.cjs"),D=require("./Info-ad8c31fe.cjs"),p=require("./utils/date.cjs"),G=require("./match-5382edcf.cjs"),A=require("./_plugin-vue_export-helper-f246444f.cjs"),H=require("./Popover-5322298f.cjs"),W=require("./Link-322e5eb2.cjs"),j=require("./utils/sort.cjs"),X=require("./BodyPopover-7a2603c3.cjs"),K=require("./Toast-7cea4f35.cjs");require("./utils/error.cjs");require("vue-router");const J=7*6,Q=e.defineComponent({__name:"Calendar",props:{minDate:{default:"2020-01-01"},mode:{},monthLabels:{},range:{},weekLabels:{},yearMonth:{}},emits:["update:range","update:yearMonth"],setup(S,{emit:f}){const C=S,d=B.DateTime.now(),i=d.year,{minDate:r,mode:k,monthLabels:m,range:c,weekLabels:g,yearMonth:h}=e.toRefs(C),b=e.computed(()=>B.DateTime.fromFormat(h.value,p.dateFormat.yearMonth).month-1),N=e.computed(()=>B.DateTime.fromFormat(h.value,p.dateFormat.yearMonth).year),P=e.computed(()=>m.value.reduce((t,l,v)=>(t[v]=l,t),{})),F=e.computed(()=>B.DateTime.fromFormat(c.value[1],p.dateFormat.yearMonthDay)),V=e.computed(()=>B.DateTime.fromFormat(c.value[0],p.dateFormat.yearMonthDay)),x=e.computed(()=>g!=null&&g.value?Array.apply(null,Array(7)).map((t,l)=>g.value[l]??""):void 0),M=e.computed(()=>{const t=B.DateTime.fromFormat(r.value,p.dateFormat.yearMonthDay).year;return new Array(i-t+1).fill(0).reduce((l,v,q)=>{const z=t+q;return l[z]=z.toString(),l},{})}),y=e.computed(()=>B.DateTime.fromFormat(h.value,p.dateFormat.yearMonth).startOf("month")),E=e.computed(()=>{const t=y.value.startOf("week");return y.value.hasSame(t,"day")?y.value.minus(B.Duration.fromObject({weeks:1})):t}),L=e.computed(()=>new Array(J).fill(0).map((t,l)=>E.value.plus({days:l}))),$=t=>t.hasSame(y.value,"month"),n=t=>({"in-range":t>=V.value&&t<=F.value,now:d.hasSame(t,"day"),"range-end":t.hasSame(F.value,"day"),"range-start":t.hasSame(V.value,"day"),"this-month":$(t)}),a=t=>d.hasSame(t,"day")?"important":$(t)&&t>=V.value&&t<=F.value?"accent":"neutral",s=e.computed(()=>y.value.endOf("month")<d),T=e.computed(()=>B.DateTime.fromFormat(r.value,p.dateFormat.yearMonthDay).startOf("month")<y.value),I=()=>{const t=y.value.month;R(t<12?t:0,t<12?void 0:y.value.year+1)},O=()=>{const t=y.value.month-2;R(t>=0?t:11,t>=0?void 0:y.value.year-1)},R=(t,l)=>{const v=y.value.set({year:l,month:parseInt(t)+1}).toFormat(p.dateFormat.yearMonth);f("update:yearMonth",v)},u=t=>{const l=G.match(k.value).when("end",()=>[c.value[0],t.toFormat(p.dateFormat.yearMonthDay)]).when("start",()=>[t.toFormat(p.dateFormat.yearMonthDay),c.value[1]]).done;f("update:range",p.normalizeRange(l))},o=t=>{const l=y.value.set({year:parseInt(t)}).toFormat(p.dateFormat.yearMonth);f("update:yearMonth",l)};return(t,l)=>(e.openBlock(),e.createBlock(w.Align,{class:"calendar",column:""},{default:e.withCtx(()=>[e.createVNode(w.Align,{class:"header"},{default:e.withCtx(()=>[e.createVNode(_.Button,{class:"month-picker",onClick:l[0]||(l[0]=e.withModifiers(()=>O(),["stop"])),disabled:!T.value,tabindex:-1,icon:"chevron-left",mood:"neutral",outline:"",size:"large-4"},null,8,["disabled"]),e.createVNode(_.Dropdown,{class:"flex-max spacing-small","onUpdate:modelValue":l[1]||(l[1]=v=>R(v)),items:P.value,modelValue:b.value,tabindex:-1,size:"small"},null,8,["items","modelValue"]),e.createVNode(_.Dropdown,{class:"spacing-small","onUpdate:modelValue":l[2]||(l[2]=v=>o(v)),items:M.value,modelValue:N.value,tabindex:-1,size:"small"},null,8,["items","modelValue"]),e.createVNode(_.Button,{class:"month-picker spacing-small",onClick:l[3]||(l[3]=e.withModifiers(()=>I(),["stop"])),disabled:!s.value,tabindex:-1,icon:"chevron-right",mood:"neutral",outline:"",size:"large-4"},null,8,["disabled"])]),_:1}),e.createVNode(w.Align,{class:"calendar-grid-container flex-max",horizontal:"center",vertical:"center"},{default:e.withCtx(()=>[e.createVNode(Y.Grid,{class:"calendar-grid no-spacing",columns:7},{default:e.withCtx(()=>[x.value?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(x.value,v=>(e.openBlock(),e.createBlock(D.Info,{class:"week-label",important:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(v),1)]),_:2},1024))),256)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(L.value,v=>(e.openBlock(),e.createBlock(_.Button,{class:e.normalizeClass(["day",n(v)]),onClick:e.withModifiers(()=>u(v),["stop"]),disabled:v>e.unref(d),label:v.day.toString(),mood:a(v),outline:a(v)==="neutral",tabindex:"-1"},null,8,["onClick","class","disabled","label","mood","outline"]))),256))]),_:1})]),_:1})]),_:1}))}});const U=A._export_sfc(Q,[["__scopeId","data-v-8d6b8d9a"]]),Z=e.defineComponent({__name:"DateRangePicker",props:{dateRangePresets:{},disabled:{type:Boolean,default:!1},modelValue:{},monthLabels:{},translator:{},weekLabels:{}},emits:["update:modelValue"],setup(S,{emit:f}){const C=S,{dateRangePresets:d,disabled:i,modelValue:r}=e.toRefs(C),k=e.ref(!1),m=e.ref(),c=e.ref(),g=n=>{const a=B.DateTime.fromFormat(n[0],p.dateFormat.yearMonthDay),s=B.DateTime.fromFormat(n[1],p.dateFormat.yearMonthDay),T=a.toFormat(p.dateFormat.yearMonth),I=a.hasSame(s,"month")&&s.endOf("month")<B.DateTime.now()?s.plus({month:1}).toFormat(p.dateFormat.yearMonth):s.toFormat(p.dateFormat.yearMonth);return[T,I]},h=()=>p.rangeToDisplayFormat(r.value),b=e.ref(h()),N=n=>{const a=g(n);L.value=a[0],$.value=a[1]},P=()=>{var n;k.value||i.value||(k.value=!0,N(r.value),(n=c.value)==null||n.$el.focus())},F=n=>{const[a,s]=p.rangeFromPreset(n);return a===r.value[0]&&s===r.value[1]},V=e.ref("start"),x=n=>{f("update:modelValue",n),V.value==="start"?V.value="end":M()};e.watch(r,()=>{b.value=h()});const M=n=>{var a,s,T;if(!n||!((a=m.value)!=null&&a.$el.contains(n.relatedTarget))){k.value=!1,V.value="start",(s=c.value)==null||s.$el.blur();return}(T=c.value)==null||T.$el.focus()},y=n=>{const a=p.rangeFromPreset(d.value[n]);f("update:modelValue",a),N(a),M()},E=g(r.value),L=e.ref(E[0]),$=e.ref(E[1]);return e.watch(b,n=>{const a=p.tryRangeFromDisplayFormat(n);a&&f("update:modelValue",a)}),(n,a)=>(e.openBlock(),e.createBlock(w.Align,{class:"date-range-picker",onClick:a[7]||(a[7]=s=>P()),ref_key:"dateRangePicker",ref:m,tabindex:"-1"},{default:e.withCtx(()=>[e.createVNode(_.Input,{ref_key:"dateRangePickerInput",ref:c,modelValue:b.value,"onUpdate:modelValue":a[0]||(a[0]=s=>b.value=s),onFocus:a[1]||(a[1]=s=>P()),onBlur:a[2]||(a[2]=s=>M(s)),disabled:e.unref(i)},null,8,["modelValue","disabled"]),e.createVNode(_.Button,{class:"no-spacing",disabled:e.unref(i),icon:"calendar",mood:"inactive",tabindex:"-1"},null,8,["disabled"]),e.createVNode(H.Popover,{class:"date-range-picker-body no-spacing",visible:k.value},{default:e.withCtx(()=>[e.createVNode(w.Align,{class:"sections"},{default:e.withCtx(()=>[e.createVNode(w.Align,{class:"presets",column:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(s,T)=>(e.openBlock(),e.createBlock(D.Info,{class:e.normalizeClass(["preset",{active:F(s)}]),onClick:e.withModifiers(()=>y(T),["stop"]),size:"small"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.translator(s.label)),1)]),_:2},1032,["onClick","class"]))),256))]),_:1}),e.createVNode(w.Align,{class:"calendars"},{default:e.withCtx(()=>[e.createVNode(U,{"onUpdate:range":a[3]||(a[3]=s=>x(s)),yearMonth:L.value,"onUpdate:yearMonth":a[4]||(a[4]=s=>L.value=s),mode:V.value,monthLabels:n.monthLabels,range:e.unref(r),weekLabels:n.weekLabels},null,8,["yearMonth","mode","monthLabels","range","weekLabels"]),e.createVNode(U,{"onUpdate:range":a[5]||(a[5]=s=>x(s)),yearMonth:$.value,"onUpdate:yearMonth":a[6]||(a[6]=s=>$.value=s),mode:V.value,monthLabels:n.monthLabels,range:e.unref(r),weekLabels:n.weekLabels},null,8,["yearMonth","mode","monthLabels","range","weekLabels"])]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1},512))}});const ee=A._export_sfc(Z,[["__scopeId","data-v-cd797576"]]),te={class:"exportBtn"},oe={class:"exportBtn-menu_item"},ae=["onClick"],ne=e.defineComponent({__name:"DropdownButton",props:{list:{},label:{}},setup(S){const f=e.ref(!1),C=()=>{f.value?i():d()},d=()=>{f.value=!0,window.addEventListener("click",k)},i=()=>{f.value=!1,window.removeEventListener("click",k)};e.onUnmounted(()=>{window.removeEventListener("click",k)});const r=m=>{m(),i()},k=m=>{const c=document.getElementsByClassName("exportBtn")[0];m.target===c||c.contains(m.target)||i()};return(m,c)=>(e.openBlock(),e.createElementBlock("div",te,[e.createVNode(_.Button,{onClick:c[0]||(c[0]=g=>C()),label:m.label,mood:"accent",tabindex:"-1",outline:""},null,8,["label"]),f.value?(e.openBlock(),e.createBlock(w.Align,{key:0,class:"exportBtn-menu",column:"",style:{margin:"0"}},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.list,g=>(e.openBlock(),e.createElementBlock("div",oe,[e.createTextVNode(e.toDisplayString(g.name),1),g.submenu?(e.openBlock(),e.createBlock(w.Align,{key:0,class:"exportBtn-subMenu",column:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.submenu,h=>(e.openBlock(),e.createElementBlock("div",{class:"exportBtn-subMenu_item",onClick:b=>r(h.handler)},e.toDisplayString(h.name),9,ae))),256))]),_:2},1024)):e.createCommentVNode("",!0)]))),256))]),_:1})):e.createCommentVNode("",!0)]))}});const le=A._export_sfc(ne,[["__scopeId","data-v-206b1898"]]),re=["disabled"],se=e.defineComponent({__name:"MultiSelect",props:{allItemsLabel:{},disabled:{type:Boolean,default:!1},items:{},modelValue:{},noInline:{type:Boolean,default:!1},showAllItemsItem:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!1},collapseTagsLabel:{default:""},collapseTagsTooltip:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(S,{emit:f}){const C=S,{disabled:d,items:i,modelValue:r,showAllItemsItem:k,collapseTags:m}=e.toRefs(C),c=e.ref(!1),g=e.ref(null),h=e.ref(null),b=e.ref(""),N=e.ref(!1),P=e.ref(),F=e.computed(()=>!r||!r.value?!1:Object.keys(i.value).every(u=>r.value.includes(u))),V=e.computed(()=>Object.values(i.value).sort(j.sort).join(", ")),x=e.computed(()=>(L(),(b.value?Object.entries(i.value).filter(([,o])=>o.toLowerCase().includes(b.value.toLowerCase())).map(([o])=>o):Object.keys(i.value)).sort(j.sort).reduce((o,t)=>(o[t]=i.value[t],o),{}))),{selectedItem:M,onKeypressDown:y,onKeypressUp:E,clearSelectedItem:L}=_.useUpDownKeys({length:e.computed(()=>Object.keys(x.value).length)}),$=e.computed(()=>r!=null&&r.value?-Object.keys(x.value).indexOf(r.value.toString()):1),n=e.computed(()=>!r||!r.value?[]:[...r.value].sort(j.sort)),a=e.computed(()=>{let u=Object.keys(x.value).length;return k.value&&u++,{"--item-count":u,"--selection-offset":$.value}}),s=()=>{var u;d.value||(c.value=!0,N.value=!1,(u=h.value)==null||u.focus())},T=u=>{var o,t;(o=g.value)!=null&&o.$el.contains(u.relatedTarget)||(c.value=!1,b.value="",(t=h.value)==null||t.blur(),L())},I=u=>{var l;if(!(r!=null&&r.value)||d!=null&&d.value||!c.value)return;if(!u){O(Object.keys(i.value));return}const o=F.value?[]:[...r.value],t=o.indexOf(u);t>=0?o.splice(t,1):o.push(u),f("update:modelValue",o),(l=h.value)==null||l.focus({preventScroll:!0})},O=u=>{var o;f("update:modelValue",u),(o=h.value)==null||o.focus({preventScroll:!0})},R=e.computed(()=>{let u=i.value[n.value[1]];for(let o=2;o<n.value.length;o++)u+=", "+i.value[n.value[o]];return u});return(u,o)=>(e.openBlock(),e.createBlock(w.Align,{class:"multiselect-container",ref_key:"multiSelectContainer",ref:g,inline:!u.noInline,column:""},{default:e.withCtx(()=>[e.createElementVNode("div",{class:e.normalizeClass(["multiselect",{active:c.value,disabled:e.unref(d)}]),onClick:o[9]||(o[9]=t=>s()),style:e.normalizeStyle(a.value),tabindex:"-1",onKeydown:[o[10]||(o[10]=e.withKeys(e.withModifiers(t=>e.unref(y)(),["prevent"]),["down"])),o[11]||(o[11]=e.withKeys(e.withModifiers(t=>e.unref(E)(),["prevent"]),["up"])),o[12]||(o[12]=e.withKeys(e.withModifiers(t=>I(Object.keys(x.value)[e.unref(M)-1]),["prevent"]),["enter"]))]},[e.createVNode(w.Align,{class:"current-item",vertical:"center"},{default:e.withCtx(()=>[!e.unref(r)||e.unref(r).length===0?(e.openBlock(),e.createBlock(D.Info,{key:0,class:"default-value"},{default:e.withCtx(()=>[e.createTextVNode(" ")]),_:1})):(e.openBlock(),e.createBlock(w.Align,{key:1,class:"current-values",wrap:!e.unref(m)},{default:e.withCtx(()=>{var t;return[F.value&&u.allItemsLabel?(e.openBlock(),e.createBlock(D.Info,{key:0,class:"current-value all-items",title:V.value},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.allItemsLabel),1)]),_:1},8,["title"])):e.unref(m)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(D.Info,{class:"current-value no-spacing cuttable",onClick:o[0]||(o[0]=()=>I(n.value[0]))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i)[n.value[0]]),1)]),_:1}),n.value.length===2?(e.openBlock(),e.createBlock(D.Info,{key:0,class:"current-value no-spacing cuttable",onClick:o[1]||(o[1]=()=>I(n.value[1]))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i)[n.value[1]]),1)]),_:1})):n.value.length>2?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(D.Info,{class:"current-value no-spacing",ref_key:"collapseTagRef",ref:P,onMouseover:o[2]||(o[2]=l=>N.value=!c.value),onMouseleave:o[3]||(o[3]=l=>N.value=!1)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.collapseTagsLabel),1)]),_:1},512),u.collapseTagsTooltip?(e.openBlock(),e.createBlock(X.BodyPopover,{key:0,visible:N.value,autoPosition:"",parentNode:(t=P.value)==null?void 0:t.$el,popoverClass:"collapse-tooltip",placementY:"top",placementX:"left"},{default:e.withCtx(()=>[e.createVNode(D.Info,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(R.value),1)]),_:1})]),_:1},8,["visible","parentNode"])):e.createCommentVNode("",!0)],64)):e.createCommentVNode("",!0)],64)):(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:2},e.renderList(n.value,l=>(e.openBlock(),e.createBlock(D.Info,{class:"current-value no-spacing",onClick:e.withModifiers(()=>I(l),["stop"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(i)[l]),1)]),_:2},1032,["onClick"]))),256))]}),_:1},8,["wrap"])),e.withDirectives(e.createElementVNode("input",{class:"flex-max new-value-input no-spacing",ref_key:"newValueInput",ref:h,"onUpdate:modelValue":o[4]||(o[4]=t=>b.value=t),onBlur:o[5]||(o[5]=t=>T(t)),onFocus:o[6]||(o[6]=t=>s()),disabled:e.unref(d)},null,40,re),[[e.vModelText,b.value]]),e.createVNode(w.Icon,{backend:"boxicons-solid",size:"small-2",value:"down-arrow"})]),_:1}),e.createVNode(w.Align,{class:"dropdown-menu no-spacing",column:""},{default:e.withCtx(()=>[e.unref(k)?(e.openBlock(),e.createBlock(D.Info,{key:0,class:e.normalizeClass(["item",{current:F.value,selected:e.unref(M)===0}]),onClick:o[7]||(o[7]=e.withModifiers(t=>O(Object.keys(e.unref(i))),["stop"])),onMouseover:o[8]||(o[8]=t=>M.value=0)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(u.allItemsLabel),1)]),_:1},8,["class"])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(x.value,(t,l,v)=>{var q;return e.openBlock(),e.createBlock(D.Info,{class:e.normalizeClass(["item no-spacing",{current:((q=e.unref(r))==null?void 0:q.includes(l))&&!F.value,selected:e.unref(M)-1===v}]),onClick:e.withModifiers(z=>I(l),["stop"]),onMouseover:z=>M.value=v+1},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t),1)]),_:2},1032,["onClick","class","onMouseover"])}),256))]),_:1})],38)]),_:1},8,["inline"]))}});const ue=A._export_sfc(se,[["__scopeId","data-v-c524578a"]]),ce=["id","value"],ie=["for"],de=e.defineComponent({__name:"Toggle",props:{mood:{default:"positive"},modelValue:{type:Boolean},id:{}},emits:["checked","unchecked","update:modelValue"],setup(S,{emit:f}){const C=S,{modelValue:d,mood:i}=e.toRefs(C),r=e.computed(()=>{const m=d.value?i.value:"inactive";return{active:d.value,[`mood-background-${m}`]:!0,[`mood-border-${m}`]:!0}}),k=()=>{const m=!d.value;f(m?"checked":"unchecked"),f("update:modelValue",m)};return(m,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("input",{class:"toggle-input",type:"checkbox",id:C.id,value:e.unref(d),onChange:c[0]||(c[0]=g=>k()),onKeyup:c[1]||(c[1]=e.withKeys(g=>k(),["enter"]))},null,40,ce),e.createElementVNode("label",{class:e.normalizeClass(["toggle",r.value]),for:C.id},null,10,ie)],64))}});const me=A._export_sfc(de,[["__scopeId","data-v-8aa21e20"]]);exports.Button=_.Button;exports.Dropdown=_.Dropdown;exports.Input=_.Input;exports.Link=W.Link;exports.PopoverMenu=K.PopoverMenu;exports.Toast=K.Toast;exports.Calendar=U;exports.DateRangePicker=ee;exports.DropdownButton=le;exports.MultiSelect=ue;exports.Toggle=me;
